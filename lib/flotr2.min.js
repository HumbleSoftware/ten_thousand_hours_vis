/*!
  * bean.js - copyright Jacob Thornton 2011
  * https://github.com/fat/bean
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */
!function(a,b){typeof module!="undefined"?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("bean",function(){function G(a){var b=a.relatedTarget;return b?b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!p(this,b):b===null}var a=window,b=1,c={},d={},e=/over|out/,f=/[^\.]*(?=\..*)\.|.*/,g=/\..*/,h="addEventListener",i="attachEvent",j="removeEventListener",k="detachEvent",l=document||{},m=l.documentElement||{},n=m[h],o=n?h:i,p=function(a,b){var c=b.parentNode;while(c!==null){if(c==a)return!0;c=c.parentNode}},q=function(a,c){return a.__uid=c&&c+"::"+b++||a.__uid||b++},r=function(a){var b=q(a);return c[b]=c[b]||{}},s=n?function(a,b,c,d){a[d?h:j](b,c,!1)}:function(a,b,c,d,e){e&&d&&a["_on"+e]===null&&(a["_on"+e]=0),a[d?i:k]("on"+b,c)},t=function(b,c,d){return function(e){return e=D(e||((this.ownerDocument||this.document||this).parentWindow||a).event),c.apply(b,[e].concat(d))}},u=function(b,c,d,e,f){return function(g){if(e?e.apply(this,arguments):n?!0:g&&g.propertyName=="_on"+d||!g)g=g?D(g||((this.ownerDocument||this.document||this).parentWindow||a).event):null,c.apply(b,Array.prototype.slice.call(arguments,g?0:1).concat(f))}},v=function(a,b,c,e){var h=b.replace(g,""),i=r(a),j=i[h]||(i[h]={}),k=c,l=q(c,b.replace(f,""));if(j[l])return a;var m=H[h];m&&(c=m.condition?u(a,c,h,m.condition):c,h=m.base||h);var p=F[h];c=p?t(a,c,e):u(a,c,h,!1,e),p=n||p;if(h=="unload"){var v=c;c=function(){w(a,h,c)&&v()}}return a[o]&&s(a,p?h:"propertychange",c,!0,!p&&h),j[l]=c,c.__uid=l,c.__originalFn=k,h=="unload"?a:d[q(a)]=a},w=function(a,b,e){function p(b){e=l[m][b];if(!e)return;delete l[m][b];if(a[o]){m=H[m]?H[m].base:m;var c=n||F[m];s(a,c?m:"propertychange",e,!1,!c&&m)}}var h=a.__uid,i,j,k,l=r(a),m=b.replace(g,"");if(!l||!l[m])return a;i=b.replace(f,""),j=i?i.split("."):[e.__uid],p(i);for(k=j.length;k--;p(j[k]));return E(l[m])&&delete l[m],E(c[h])&&(delete c[h],delete d[h]),a},x=function(a,b,c){return function(d){var e=typeof a=="string"?c(a,this):a;for(var f=d.target;f&&f!=this;f=f.parentNode)for(var g=e.length;g--;)if(e[g]==f)return b.apply(f,arguments)}},y=function(a,b,c,d,e){if(typeof b=="object"&&!c)for(var f in b)b.hasOwnProperty(f)&&y(a,f,b[f]);else{var g=typeof c=="string",h=(g?c:b).split(" ");c=g?x(b,d,e):c;for(var i=h.length;i--;)v(a,h[i],c,Array.prototype.slice.call(arguments,g?4:3))}return a},z=function(a,b,c){var d,e,h,i,j,k=typeof b=="string",l=k&&b.replace(f,""),m=w,n=r(a);l=l&&l.split(".");if(k&&/\s/.test(b)){b=b.split(" "),j=b.length-1;while(z(a,b[j])&&j--);return a}i=k?b.replace(g,""):b;if(!n||l||k&&!n[i]){for(d in n)if(n.hasOwnProperty(d))for(j in n[d])for(e=l.length;e--;)n[d].hasOwnProperty(j)&&(new RegExp("^"+l[e]+"::\\d*(\\..*)?$")).test(j)&&m(a,[d,j].join("."));return a}if(typeof c=="function")m(a,i,c);else if(l)m(a,b);else{m=i?m:z,h=k&&i,i=i?c||n[i]||i:n;for(d in i)i.hasOwnProperty(d)&&(m(a,h||d,i[d]),delete i[d])}return a},A=function(a,b,c){var d,e,h,i,j=b.split(" ");for(h=j.length;h--;){b=j[h].replace(g,"");var k=F[b],l=j[h].replace(f,""),m=r(a)[b];if(l){l=l.split(".");for(e=l.length;e--;)for(i in m)m.hasOwnProperty(i)&&(new RegExp("^"+l[e]+"::\\d*(\\..*)?$")).test(i)&&m[i].apply(a,[!1].concat(c))}else if(!c&&a[o])B(k,b,a);else for(e in m)m.hasOwnProperty(e)&&m[e].apply(a,[!1].concat(c))}return a},B=n?function(b,c,d){evt=document.createEvent(b?"HTMLEvents":"UIEvents"),evt[b?"initEvent":"initUIEvent"](c,!0,!0,a,1),d.dispatchEvent(evt)}:function(a,b,c){a?c.fireEvent("on"+b,document.createEventObject()):c["_on"+b]++},C=function(a,b,c){var d=r(b),e,f,g=q(a);e=c?d[c]:d;for(f in e)e.hasOwnProperty(f)&&(c?y:C)(a,c||b,c?e[f].__originalFn:f);return a},D=function(a){var b={};if(!a)return b;var c=a.type,d=a.target||a.srcElement;b.preventDefault=D.preventDefault(a),b.stopPropagation=D.stopPropagation(a),b.target=d&&d.nodeType==3?d.parentNode:d;if(~c.indexOf("key"))b.keyCode=a.which||a.keyCode;else if(/click|mouse|menu/i.test(c)){b.rightClick=a.which==3||a.button==2,b.pos={x:0,y:0};if(a.pageX||a.pageY)b.clientX=a.pageX,b.clientY=a.pageY;else if(a.clientX||a.clientY)b.clientX=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b.clientY=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;e.test(c)&&(b.relatedTarget=a.relatedTarget||a[(c=="mouseover"?"from":"to")+"Element"])}for(var f in a)f in b||(b[f]=a[f]);return b},E=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};D.preventDefault=function(a){return function(){a.preventDefault?a.preventDefault():a.returnValue=!1}},D.stopPropagation=function(a){return function(){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}};var F={click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1},H={mouseenter:{base:"mouseover",condition:G},mouseleave:{base:"mouseout",condition:G},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}},I={add:y,remove:z,clone:C,fire:A},J=function(a){var b=z(a).__uid;b&&(delete d[b],delete c[b])};return a[i]&&y(a,"unload",function(){for(var b in d)d.hasOwnProperty(b)&&J(d[b]);a.CollectGarbage&&CollectGarbage()}),I.noConflict=function(){return context.bean=old,this},I}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new B(a)};typeof module!="undefined"&&module.exports?(module.exports=w,w._=w):a._=w,w.VERSION="1.1.7";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(j.call(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=c!==void 0;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b);var e=(w.isArray(a)?a.slice():w.toArray(a)).reverse();return w.reduce(e,b,c,d)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b=b||w.identity;var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e|=b.call(d,a,f,g))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(y(a,function(a){if(c=a===b)return!0}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={};return x(a,function(a,d){var e=b(a,d);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.last=function(a){return a[a.length-1]},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a){return w.reduce(a,function(a,b){return w.isArray(b)?a.concat(w.flatten(b)):(a[a.length]=b,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b){return w.reduce(a,function(a,c,d){if(0==d||(b===!0?w.last(a)!=c:!w.include(a,c)))a[a.length]=c;return a},[])},w.union=function(){return w.uniq(w.flatten(arguments))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a,b){return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f},w.bind=function(a,b){if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));var c=g.call(arguments,2);return function(){return a.apply(b,c.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return j.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))};var z=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}};w.throttle=function(a,b){return z(a,b,!1)},w.debounce=function(a,b){return z(a,b,!0)},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}},w.compose=function(){var a=g.call(arguments);return function(){var b=g.call(arguments);for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.call(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isArray(a)?a.slice():w.extend({},a)},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){if(a===b)return!0;var c=typeof a,d=typeof b;if(c!=d)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(w.isDate(a)&&w.isDate(b))return a.getTime()===b.getTime();if(w.isNaN(a)&&w.isNaN(b))return!1;if(w.isRegExp(a)&&w.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;var e=w.keys(a),f=w.keys(b);if(e.length!=f.length)return!1;for(var g in a)if(!(g in b)||!w.isEqual(a[g],b[g]))return!1;return!0},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(j.call(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)==="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return!!a&&!!j.call(a,"callee")},w.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},w.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},w.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1},w.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},w.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.mixin=function(a){x(w.functions(a),function(b){D(b,w[b]=a[b])})};var A=0;w.uniqueId=function(a){var b=A++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e};var B=function(a){this._wrapped=a};w.prototype=B.prototype;var C=function(a,b){return b?w(a).chain():a},D=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),C(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];B.prototype[a]=function(){return b.apply(this._wrapped,arguments),C(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];B.prototype[a]=function(){return C(b.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}();var Canvas2Image=function(){var a=document.createElement("canvas"),b=String.fromCharCode,c="image/octet-stream",d=!1;if(!a.getContext)return{saveAsBMP:function(){},saveAsPNG:function(){},saveAsJPEG:function(){}};var e=!!a.getContext("2d").getImageData,f=!!a.toDataURL,g=!!window.btoa,h=function(a){var b=parseInt(a.width),c=parseInt(a.height);return a.getContext("2d").getImageData(0,0,b,c)},i=function(a){var c,d,e="";if(typeof a=="string")e=a;else{d=a;for(c=0;c<d.length;c++)e+=b(d[c])}return btoa(e)},j=function(a){var c="",d=a.width,e=a.height;c+="BM";var f=d*e*4+54;c+=b(f%256),f=Math.floor(f/256),c+=b(f%256),f=Math.floor(f/256),c+=b(f%256),f=Math.floor(f/256),c+=b(f%256),c+=b(0,0,0,0,54,0,0,0),c+=b(40,0,0,0);var g=d;c+=b(g%256),g=Math.floor(g/256),c+=b(g%256),g=Math.floor(g/256),c+=b(g%256),g=Math.floor(g/256),c+=b(g%256);var h=e;c+=b(h%256),h=Math.floor(h/256),c+=b(h%256),h=Math.floor(h/256),c+=b(h%256),h=Math.floor(h/256),c+=b(h%256),c+=b(1,0,32,0),c+=b(0,0,0,0);var j=d*e*4;c+=b(j%256),j=Math.floor(j/256),c+=b(j%256),j=Math.floor(j/256),c+=b(j%256),j=Math.floor(j/256),c+=b(j%256),c+=b(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var k=a.data,l="",m,n,o=e,p,q,r;do{q=d*(o-1)*4,r="";for(n=0;n<d;n++)p=4*n,r+=b(k[q+p+2],k[q+p+1],k[q+p],k[q+p+3]);l+=r}while(--o);return i(c+l)},k=function(a){window.open(a)||(document.location.href=a)},l=function(a,b){return"data:"+b+";base64,"+a},m=function(a){var b=document.createElement("img");return b.src=a,b},n=function(a,b,c){if(b&&c){var d=document.createElement("canvas");d.width=b,d.height=c,d.style.width=b+"px",d.style.height=c+"px";var e=d.getContext("2d");return e.drawImage(a,0,0,a.width,a.height,0,0,b,b),d}return a};return{saveAsPNG:function(a,b,e,g){if(!f)return!1;var h=n(a,e,g),i="image/png",j=h.toDataURL(i);return b?m(j):(k(d?j.replace(i,c):j),!0)},saveAsJPEG:function(a,b,e,g){if(!f)return!1;var h=n(a,e,g),i="image/jpeg",j=h.toDataURL(i);return j.indexOf(i)!=5?!1:b?m(j):(k(d?j.replace(i,c):j),!0)},saveAsBMP:function(a,b,c,d){if(!(f&&e&&g))return!1;var i=n(a,c,d),o="image/bmp",p=h(i),q=j(p);return b?m(l(q,o)):(k(l(q,o)),!0)}}}();

(function(){var a=this,b=this.Flotr,c;c={_:_,version:"0.2.0-alpha",revision:("$Revision: 192 $".match(/(\d+)/)||[null,null])[1],author:["Bas Wenneker","Fabien Ménager"],website:"http://www.solutoire.com",isIphone:/iphone/i.test(navigator.userAgent),isIE:navigator.appVersion.indexOf("MSIE")!=-1?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(a,b){c.graphTypes[a]=b,c.defaultOptions[a]=b.options||{},c.defaultOptions.defaultType=c.defaultOptions.defaultType||a},addPlugin:function(a,b){c.plugins[a]=b,c.defaultOptions[a]=b.options||{}},draw:function(a,b,d,e){return e=e||c.Graph,new e(a,b,d)},merge:function(a,b){var d,e,f=b||{};for(d in a)e=a[d],f[d]=e&&typeof e=="object"&&e.constructor!==Array&&e.constructor!==RegExp&&!this._.isElement(e)?c.merge(e,b?b[d]:undefined):f[d]=e;return f},clone:function(a){var b,d,e={};for(b in a)d=a[b],e[b]=d&&typeof d=="object"&&d.constructor!==Array&&d.constructor!==RegExp&&!this._.isElement(d)?c.clone(d):d;return e},getTickSize:function(a,b,d,e){var f=(d-b)/a,g=c.getMagnitude(f),h=10,i=f/g;return i<1.5?h=1:i<2.25?h=2:i<3?h=e==0?2:2.5:i<7.5&&(h=5),h*g},defaultTickFormatter:function(a,b){return a+""},defaultTrackFormatter:function(a){return"("+a.x+", "+a.y+")"},engineeringNotation:function(a,b,c){var d=["Y","Z","E","P","T","G","M","k",""],e=["y","z","a","f","p","n","µ","m",""],f=d.length;c=c||1e3,b=Math.pow(10,b||2);if(a==0)return 0;if(a>1)while(f--&&a>=c)a/=c;else{d=e,f=d.length;while(f--&&a<1)a*=c}return Math.round(a*b)/b+d[f]},getMagnitude:function(a){return Math.pow(10,Math.floor(Math.log(a)/Math.LN10))},toPixel:function(a){return Math.floor(a)+.5},toRad:function(a){return-a*(Math.PI/180)},floorInBase:function(a,b){return b*Math.floor(a/b)},drawText:function(a,b,d,e,f){if(!a.fillText||c.isIphone){a.drawText(b,d,e,f);return}f=this._.extend({size:c.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},f),a.save(),a.translate(d,e),a.rotate(f.angle),a.fillStyle=f.color,a.font=(f.weight>1?"bold ":"")+f.size*1.3+"px sans-serif",a.textAlign=f.textAlign,a.textBaseline=f.textBaseline,a.fillText(b,0,0),a.restore()},getBestTextAlign:function(a,b){return b=b||{textAlign:"center",textBaseline:"middle"},a+=c.getTextAngleFromAlign(b),Math.abs(Math.cos(a))>.01&&(b.textAlign=Math.cos(a)>0?"right":"left"),Math.abs(Math.sin(a))>.01&&(b.textBaseline=Math.sin(a)>0?"top":"bottom"),b},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(a){return c.alignTable[a.textAlign+" "+a.textBaseline]||0},noConflict:function(){return a.Flotr=b,this}},a.Flotr=c})(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontSize:7.5,resolution:1,parseFloat:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function b(a,b,c,d){this.rgba=["r","g","b","a"];var e=4;while(-1<--e)this[this.rgba[e]]=arguments[e]||(e==3?1:0);this.normalize()}var a=Flotr._,c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};b.prototype={scale:function(a,b,c,d){var e=4;while(-1<--e)arguments[e]!=null&&(this[this.rgba[e]]*=arguments[e]);return this.normalize()},alpha:function(b){return!a.isUndefined(b)&&!a.isNull(b)&&(this.a=b),this.normalize()},clone:function(){return new b(this.r,this.b,this.g,this.a)},limit:function(a,b,c){return Math.max(Math.min(a,c),b)},normalize:function(){var a=this.limit;return this.r=a(parseInt(this.r),0,255),this.g=a(parseInt(this.g),0,255),this.b=a(parseInt(this.b),0,255),this.a=a(this.a,0,1),this},distance:function(a){if(!a)return;a=new b.parse(a);var c=0,d=3;while(-1<--d)c+=Math.abs(this[this.rgba[d]]-a[this.rgba[d]]);return c},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"}},a.extend(b,{parse:function(a){if(a instanceof b)return a;var d;if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return new b(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return new b(parseInt(d[1]),parseInt(d[2]),parseInt(d[3]));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return new b(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return new b(parseInt(d[1]),parseInt(d[2]),parseInt(d[3]),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return new b(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55);if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return new b(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55,parseFloat(d[4]));var e=(a+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return e=="transparent"?new b(255,255,255,0):(d=c[e])?new b(d[0],d[1],d[2]):new b(0,0,0,0)},processColor:function(c,d){var e=d.opacity;if(!c)return"rgba(0, 0, 0, 0)";if(c instanceof b)return c.alpha(e).toString();if(a.isString(c))return b.parse(c).alpha(e).toString();var f=c.colors?c:{colors:c};if(!d.ctx)return a.isArray(f.colors)?b.parse(a.isArray(f.colors[0])?f.colors[0][1]:f.colors[0]).alpha(e).toString():"rgba(0, 0, 0, 0)";f=a.extend({start:"top",end:"bottom"},f),/top/i.test(f.start)&&(d.x1=0),/left/i.test(f.start)&&(d.y1=0),/bottom/i.test(f.end)&&(d.x2=0),/right/i.test(f.end)&&(d.y2=0);var g,h,i,j=d.ctx.createLinearGradient(d.x1,d.y1,d.x2,d.y2);for(g=0;g<f.colors.length;g++)h=f.colors[g],a.isArray(h)?(i=h[0],h=h[1]):i=g/(f.colors.length-1),j.addColorStop(i,b.parse(h).alpha(e));return j}}),Flotr.Color=b}(),Flotr.Date={format:function(a,b){function d(a){return a+="",a.length==1?"0"+a:a}if(!a)return;var c={h:a.getUTCHours().toString(),H:d(a.getUTCHours()),M:d(a.getUTCMinutes()),S:d(a.getUTCSeconds()),s:a.getUTCMilliseconds(),d:a.getUTCDate().toString(),m:(a.getUTCMonth()+1).toString(),y:a.getUTCFullYear().toString(),b:Flotr.Date.monthNames[a.getUTCMonth()]},e=[],f,g=!1;for(var h=0;h<b.length;++h)f=b.charAt(h),g?(e.push(c[f]||f),g=!1):f=="%"?g=!0:e.push(f);return e.join("")},getFormat:function(a,b){var c=Flotr.Date.timeUnits;return a<c.second?"%h:%M:%S.%s":a<c.minute?"%h:%M:%S":a<c.day?b<2*c.day?"%h:%M":"%b %d %h:%M":a<c.month?"%b %d":a<c.year?b<c.year?"%b":"%b %y":"%y"},formatter:function(a,b){var c=new Date(a);if(b.options.timeFormat!=null)return Flotr.Date.format(c,b.options.timeFormat);var d=b.max-b.min,e=b.tickSize*Flotr.Date.timeUnits[b.tickUnit];return Flotr.Date.format(c,Flotr.Date.getFormat(e,d))},generator:function(a){var b=[],c=new Date(a.min),d=Flotr.Date.timeUnits,e=a.tickSize*d[a.tickUnit];switch(a.tickUnit){case"millisecond":c.setUTCMilliseconds(Flotr.floorInBase(c.getUTCMilliseconds(),a.tickSize));break;case"second":c.setUTCSeconds(Flotr.floorInBase(c.getUTCSeconds(),a.tickSize));break;case"minute":c.setUTCMinutes(Flotr.floorInBase(c.getUTCMinutes(),a.tickSize));break;case"hour":c.setUTCHours(Flotr.floorInBase(c.getUTCHours(),a.tickSize));break;case"month":c.setUTCMonth(Flotr.floorInBase(c.getUTCMonth(),a.tickSize));break;case"year":c.setUTCFullYear(Flotr.floorInBase(c.getUTCFullYear(),a.tickSize))}e>=d.second&&c.setUTCMilliseconds(0),e>=d.minute&&c.setUTCSeconds(0),e>=d.hour&&c.setUTCMinutes(0),e>=d.day&&c.setUTCHours(0),e>=d.day*4&&c.setUTCDate(1),e>=d.year&&c.setUTCMonth(0);var f=0,g=Number.NaN,h;do{h=g,g=c.getTime(),b.push({v:g,label:Flotr.Date.formatter(g,a)});if(a.tickUnit=="month")if(a.tickSize<1){c.setUTCDate(1);var i=c.getTime();c.setUTCMonth(c.getUTCMonth()+1);var j=c.getTime();c.setTime(g+f*d.hour+(j-i)*a.tickSize),f=c.getUTCHours(),c.setUTCHours(0)}else c.setUTCMonth(c.getUTCMonth()+a.tickSize);else a.tickUnit=="year"?c.setUTCFullYear(c.getUTCFullYear()+a.tickSize):c.setTime(g+e)}while(g<a.max&&g!=h);return b},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){var a=Flotr._;Flotr.DOM={addClass:function(b,c){var d=b.className?b.className:"";if(a.include(d.split(/\s+/g),c))return;b.className=(d?d+" ":"")+c},create:function(a){return document.createElement(a)},node:function(a){var b=Flotr.DOM.create("div"),c;return b.innerHTML=a,c=b.children[0],b.innerHTML="",c},empty:function(a){a.innerHTML=""},hide:function(a){Flotr.DOM.setStyles(a,{display:"none"})},insert:function(b,c){a.isString(c)?b.innerHTML+=c:a.isElement(c)&&b.appendChild(c)},opacity:function(a,b){a.style.opacity=b},position:function(a,b){return a.offsetParent?(b=this.position(a.offsetParent),b.left+=a.offsetLeft,b.top+=a.offsetTop,b):{left:a.offsetLeft||0,top:a.offsetTop||0}},removeClass:function(b,c){var d=b.className?b.className:"";b.className=a.filter(d.split(/\s+/g),function(a){if(a!=c)return!0}).join(" ")},setStyles:function(b,c){a.each(c,function(a,c){b.style[c]=a})},show:function(a){Flotr.DOM.setStyles(a,{display:""})},size:function(a){return{height:a.scrollHeight,width:a.scrollWidth}}}}(),Flotr.EventAdapter={observe:function(a,b,c){return bean.add(a,b,c),this},fire:function(a,b,c){return bean.fire(a,b,c),typeof Prototype!="undefined"&&Event.fire(a,b,c),this},stopObserving:function(a,b,c){return bean.remove(a,b,c),this},eventPointer:function(a){return!Flotr._.isUndefined(a.touches)&&a.touches.length>0?{x:a.touches[0].pageX,y:a.touches[0].pageY}:!Flotr._.isUndefined(a.changedTouches)&&a.changedTouches.length>0?{x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY}:Flotr.isIE&&Flotr.isIE<9?{x:a.clientX+document.body.scrollLeft,y:a.clientY+document.body.scrollTop}:{x:a.pageX,y:a.pageY}}},function(){var a=Flotr,b=a.DOM,c=a._,d=function(a){this.o=a};d.prototype={dimensions:function(a,b,c,d){return a?this.o.html?this.html(a,this.o.element,c,d):this.canvas(a,b):{width:0,height:0}},canvas:function(b,c){if(!this.o.textEnabled)return;c=c||{};var d=this.measureText(b,c),e=d.width,f=c.size||a.defaultOptions.fontSize,g=c.angle||0,h=Math.cos(g),i=Math.sin(g),j=2,k=6,l;return l={width:Math.abs(h*e)+Math.abs(i*f)+j,height:Math.abs(i*e)+Math.abs(h*f)+k},l},html:function(a,c,d,e){var f=b.create("div");return b.setStyles(f,{position:"absolute",top:"-10000px"}),b.insert(f,'<div style="'+d+'" class="'+e+' flotr-dummy-div">'+a+"</div>"),b.insert(this.o.element,f),b.size(f)},measureText:function(b,d){var e=this.o.ctx,f;return!e.fillText||a.isIphone?{width:e.measure(b,d)}:(d=c.extend({size:a.defaultOptions.fontSize,weight:1,angle:0},d),e.save(),e.font=(d.weight>1?"bold ":"")+d.size*1.3+"px sans-serif",f=e.measureText(b),e.restore(),f)}},Flotr.Text=d}(),function(){var a=Flotr.DOM,b=Flotr.EventAdapter,c=Flotr._;flotr=Flotr,Graph=function(a,d,e){this._setEl(a),this._initMembers(),this._initPlugins(),b.fire(this.el,"flotr:beforeinit",[this]),this.data=d,this.series=flotr.Series.getSeries(d),this._initOptions(e),this._initGraphTypes(),this._initCanvas(),this._text=new flotr.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),b.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(c.bind(function(){b.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){c.each(this._handles,function(a){b.stopObserving.apply(this,a)}),this._handles=[],this.el.graph=null},_observe:function(a,c,d){return b.observe.apply(this,arguments),this._handles.push(arguments),this},getType:function(a){var b=a&&a.type?a.type:this.options.defaultType;return this[b]},processColor:function(a,b){var d={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return c.extend(d,b),flotr.Color.processColor(a,d)},findDataRanges:function(){var a=this.axes,b,d,e;a.x.datamin=a.x2.datamin=a.y.datamin=a.y2.datamin=Number.MAX_VALUE,a.x.datamax=a.x2.datamax=a.y.datamax=a.y2.datamax=-Number.MAX_VALUE,c.each(this.series,function(a){e=a.getRange(),e&&(b=a.xaxis,d=a.yaxis,b.datamin=Math.min(e.xmin,b.datamin),b.datamax=Math.max(e.xmax,b.datamax),d.datamin=Math.min(e.ymin,d.datamin),d.datamax=Math.max(e.ymax,d.datamax),b.used=b.used||e.xused?!0:!1,d.used=d.used||e.yused?!0:!1)},this),!a.x.used&&!a.x2.used&&(a.x.used=!0),!a.y.used&&!a.y2.used&&(a.y.used=!0),c.each(a,function(a){a.calculateRange()});var f=c.keys(flotr.graphTypes);c.each(this.series,function(a){c.each(f,function(b){a[b]&&a[b].show&&(this[b].extendRange&&this[b].extendRange(a),this[b].extendYRange&&this[b].extendYRange(a.yaxis),this[b].extendXRange&&this[b].extendXRange(a.xaxis))},this)},this)},calculateSpacing:function(){var a=this.axes,b=this.options,d=this.series,e=b.grid.labelMargin,f=this._text,g=a.x,h=a.x2,i=a.y,j=a.y2,k=b.grid.outlineWidth,l,m,n,o;c.each(a,function(a){a.calculateTicks(),a.calculateTextDimensions(f,b)}),o=f.dimensions(b.title,{size:b.fontSize*1.5},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=o.height,o=f.dimensions(b.subtitle,{size:b.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=o.height;for(m=0;m<b.length;++m)d[m].points.show&&(k=Math.max(k,d[m].points.radius+d[m].points.lineWidth/2));var p=this.plotOffset;g.options.margin===!1?(p.bottom=0,p.top=0):(p.bottom+=(b.grid.circular?0:g.used&&g.options.showLabels?g.maxLabel.height+e:0)+(g.used&&g.options.title?g.titleSize.height+e:0)+k,p.top+=(b.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.height+e:0)+(h.used&&h.options.title?h.titleSize.height+e:0)+this.subtitleHeight+this.titleHeight+k),i.options.margin===!1?(p.left=0,p.right=0):(p.left+=(b.grid.circular?0:i.used&&i.options.showLabels?i.maxLabel.width+e:0)+(i.used&&i.options.title?i.titleSize.width+e:0)+k,p.right+=(b.grid.circular?0:j.used&&j.options.showLabels?j.maxLabel.width+e:0)+(j.used&&j.options.title?j.titleSize.width+e:0)+k),p.top=Math.floor(p.top),this.plotWidth=this.canvasWidth-p.left-p.right,this.plotHeight=this.canvasHeight-p.bottom-p.top,g.length=h.length=this.plotWidth,i.length=j.length=this.plotHeight,i.offset=j.offset=this.plotHeight,g.setScale(),h.setScale(),i.setScale(),j.setScale()},draw:function(a){var d=c.bind(function(){if(this.series.length){b.fire(this.el,"flotr:beforedraw",[this.series,this]);for(var c=0;c<this.series.length;c++)this.series[c].hide||this.drawSeries(this.series[c])}this.clip(),b.fire(this.el,"flotr:afterdraw",[this.series,this]),a()},this),e=this.options.grid;if(e&&e.backgroundImage){c.isString(e.backgroundImage)?e.backgroundImage={src:e.backgroundImage,left:0,top:0}:e.backgroundImage=c.extend({left:0,top:0},e.backgroundImage);var f=new Image;f.onload=c.bind(function(){var a=this.plotOffset.left+(parseInt(e.backgroundImage.left)||0),b=this.plotOffset.top+(parseInt(e.backgroundImage.top)||0),c=this.ctx.globalAlpha;this.ctx.globalAlpha=e.backgroundImage.alpha||c,this.ctx.drawImage(f,a,b),this.ctx.globalAlpha=c,d()},this),f.onabort=f.onerror=d,f.src=e.backgroundImage.src}else d()},drawSeries:function(a){a=a||this.series;var b=!1;c.each(flotr.graphTypes,function(c,d){a[d]&&a[d].show&&(b=!0,c.draw.call(this,a))},this),b||this[this.options.defaultType].draw(a)},getEventPosition:function(a){var c=document,d=this.overlay.getBoundingClientRect(),e=b.eventPointer(a),f=a.clientX-c.body.scrollLeft-c.documentElement.scrollLeft-d.left-this.plotOffset.left,g=a.clientY-c.body.scrollTop-c.documentElement.scrollTop-d.top-this.plotOffset.top,h=e.x-this.lastMousePos.pageX,i=e.y-this.lastMousePos.pageY;return{x:this.axes.x.p2d(f),x2:this.axes.x2.p2d(f),y:this.axes.y.p2d(g),y2:this.axes.y2.p2d(g),relX:f,relY:g,dX:h,dY:i,absX:e.x,absY:e.y}},clickHandler:function(a){if(this.ignoreClick)return this.ignoreClick=!1,this.ignoreClick;b.fire(this.el,"flotr:click",[this.getEventPosition(a),this])},mouseMoveHandler:function(a){var c=this.getEventPosition(a);this.lastMousePos.pageX=c.absX,this.lastMousePos.pageY=c.absY,b.fire(this.el,"flotr:mousemove",[a,c,this])},mouseDownHandler:function(a){this.mouseUpHandler=c.bind(this.mouseUpHandler,this),b.observe(document,"mouseup",this.mouseUpHandler),b.fire(this.el,"flotr:mousedown",[a,this])},mouseUpHandler:function(a){b.stopObserving(document,"mouseup",this.mouseUpHandler),b.fire(this.el,"flotr:mouseup",[a,this])},drawTooltip:function(b,c,d,e){var f=this.getMouseTrack(),g="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",h=e.position,i=e.margin,j=this.plotOffset;c!==null&&d!==null?(e.relative?(h.charAt(0)=="n"?g+="bottom:"+(i-j.top-d+this.canvasHeight)+"px;top:auto;":h.charAt(0)=="s"&&(g+="top:"+(i+j.top+d)+"px;bottom:auto;"),h.charAt(1)=="e"?g+="left:"+(i+j.left+c)+"px;right:auto;":h.charAt(1)=="w"&&(g+="right:"+(i-j.left-c+this.canvasWidth)+"px;left:auto;")):(h.charAt(0)=="n"?g+="top:"+(i+j.top)+"px;bottom:auto;":h.charAt(0)=="s"&&(g+="bottom:"+(i+j.bottom)+"px;top:auto;"),h.charAt(1)=="e"?g+="right:"+(i+j.right)+"px;left:auto;":h.charAt(1)=="w"&&(g+="left:"+(i+j.left)+"px;right:auto;")),f.style.cssText=g,a.empty(f),a.insert(f,b),a.show(f)):a.hide(f)},clip:function(){var a=this.ctx,b=this.plotOffset,c=this.canvasWidth,d=this.canvasHeight;flotr.isIE&&flotr.isIE<9?(a.save(),a.fillStyle=this.processColor(this.options.ieBackgroundColor),a.fillRect(0,0,c,b.top),a.fillRect(0,0,b.left,d),a.fillRect(0,d-b.bottom,c,b.bottom),a.fillRect(c-b.right,0,b.right,d),a.restore()):(a.clearRect(0,0,c,b.top),a.clearRect(0,0,b.left,d),a.clearRect(0,d-b.bottom,c,b.bottom),a.clearRect(c-b.right,0,b.right,d))},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!1,this.prevHit=null},_initGraphTypes:function(){c.each(flotr.graphTypes,function(a,b){this[b]=c.clone(a),c.each(a,function(a,d){c.isFunction(a)&&(this[b][d]=c.bind(a,this))},this)},this)},_initEvents:function(){this._observe(this.overlay,"mousedown",c.bind(this.mouseDownHandler,this))._observe(this.el,"mousemove",c.bind(this.mouseMoveHandler,this))._observe(this.overlay,"click",c.bind(this.clickHandler,this));var a=c.bind(function(c){b.stopObserving(document,"touchend",a),b.fire(this.el,"flotr:mouseup",[event,this])},this);this._observe(this.overlay,"touchstart",c.bind(function(c){b.fire(this.el,"flotr:mousedown",[event,this]),this._observe(document,"touchend",a)},this)),this._observe(this.overlay,"touchmove",c.bind(function(a){a.preventDefault();var c=a.touches[0].pageX,d=a.touches[0].pageY,e=this.getEventPosition(a.touches[0]);this.lastMousePos.pageX=c,this.lastMousePos.pageY=d,b.fire(this.el,"flotr:mousemove",[event,e,this])},this))},_initCanvas:function(){function g(f,g){return f||(f=a.create("canvas"),f.className="flotr-"+g,f.style.cssText="position:absolute;left:0px;top:0px;"),c.each(e,function(b,c){f.setAttribute(c,b*d.resolution),f.style[c]=b+"px",a.show(f)}),f.context_=null,a.insert(b,f),f}function h(a){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(a);var b=a.getContext("2d");return window.G_vmlCanvasManager||b.scale(d.resolution,d.resolution),b}var b=this.el,d=this.options,e,f;a.empty(b),a.setStyles(b,{position:"relative",cursor:b.style.cursor||"default"}),e=a.size(b);if(e.width<=0||e.height<=0||d.resolution<=0)throw"Invalid dimensions for plot, width = "+e.width+", height = "+e.height+", resolution = "+d.resolution;this.canvas=g(this.canvas,"canvas"),this.overlay=g(this.overlay,"overlay"),this.ctx=h(this.canvas),this.octx=h(this.overlay),this.canvasHeight=e.height*d.resolution,this.canvasWidth=e.width*d.resolution,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){c.each(flotr.plugins,function(a,b){c.each(a.callbacks,function(a,b){this._observe(this.el,b,c.bind(a,this))},this),this[b]=c.clone(a),c.each(this[b],function(a,d){c.isFunction(a)&&(this[b][d]=c.bind(a,this))},this)},this)},_initOptions:function(a){var b=flotr.clone(flotr.defaultOptions);b.x2axis=c.extend(c.clone(b.xaxis),b.x2axis),b.y2axis=c.extend(c.clone(b.yaxis),b.y2axis),this.options=flotr.merge(a||{},b),this.axes=flotr.Axis.getAxes(this.options),this.options.grid.minorVerticalLines===null&&this.options.xaxis.scaling==="logarithmic"&&(this.options.grid.minorVerticalLines=!0),this.options.grid.minorHorizontalLines===null&&this.options.yaxis.scaling==="logarithmic"&&(this.options.grid.minorHorizontalLines=!0);var d=[],e=[],f=this.series.length,g=this.series.length,h=this.options.colors,i=[],j=0,k,l,m,n;for(l=g-1;l>-1;--l)k=this.series[l].color,k&&(--g,c.isNumber(k)?d.push(k):i.push(flotr.Color.parse(k)));for(l=d.length-1;l>-1;--l)g=Math.max(g,d[l]+1);for(l=0;e.length<g;){k=h.length==l?new flotr.Color(100,100,100):flotr.Color.parse(h[l]);var o=j%2==1?-1:1,p=1+o*Math.ceil(j/2)*.2;k.scale(p,p,p),e.push(k),++l>=h.length&&(l=0,++j)}for(l=0,m=0;l<f;++l){n=this.series[l],n.color==null?n.color=e[m++].toString():c.isNumber(n.color)&&(n.color=e[n.color].toString()),n.xaxis||(n.xaxis=this.axes.x),n.xaxis==1?n.xaxis=this.axes.x:n.xaxis==2&&(n.xaxis=this.axes.x2),n.yaxis||(n.yaxis=this.axes.y),n.yaxis==1?n.yaxis=this.axes.y:n.yaxis==2&&(n.yaxis=this.axes.y2);for(var q in flotr.graphTypes)n[q]=c.extend(c.clone(this.options[q]),n[q]);n.mouse=c.extend(c.clone(this.options.mouse),n.mouse),n.shadowSize==null&&(n.shadowSize=this.options.shadowSize)}},_setEl:function(a){if(!a)throw"The target container doesn't exist";if(!a.clientWidth)throw"The target container must be visible";this.el=a,this.el.graph&&this.el.graph.destroy(),this.el.graph=this}},Flotr.Graph=Graph}(),function(){function c(b){this.orientation=1,this.offset=0,this.stacks={},a.extend(this,b),this._setTranslations()}function d(a){return this.offset+this.orientation*(a-this.min)*this.scale}function e(a){return(this.offset+this.orientation*a)/this.scale+this.min}function f(a){return this.offset+this.orientation*(h(a,this.options.base)-h(this.min,this.options.base))*this.scale}function g(a){return j((this.offset+this.orientation*a)/this.scale+h(this.min,this.options.base),this.options.base)}function h(a,b){return a=Math.log(Math.max(a,Number.MIN_VALUE)),b!==Math.E&&(a/=Math.log(o.base)),a}function j(a,b){return b===Math.E?Math.exp(a):Math.pow(b,a)}var a=Flotr._,b="logarithmic";c.prototype={setScale:function(){var a=this.length;this.options.scaling==b?this.scale=a/(h(this.max,this.options.base)-h(this.min,this.options.base)):this.scale=a/(this.max-this.min)},getStack:function(b){var c=this.stacks;return a.isUndefined(c[b])?c[b]={}:c[b]},calculateTicks:function(){var a=this.options;this.ticks=[],this.minorTicks=[],a.ticks?(this._cleanUserTicks(a.ticks,this.ticks),this._cleanUserTicks(a.minorTicks||[],this.minorTicks)):a.mode=="time"?this._calculateTimeTicks():a.scaling==="logarithmic"?this._calculateLogTicks():this._calculateTicks()},calculateRange:function(){if(!this.used)return;var a=this,b=a.options,c=b.min!=null?b.min:a.datamin,d=b.max!=null?b.max:a.datamax,e=b.autoscaleMargin;b.scaling=="logarithmic"&&(c<=0&&(c=a.datamin),d<=0&&(d=c));if(d-c==0){var f=d==0?1:.01;c-=f,d+=f}if(b.scaling==="logarithmic"){c<0&&(c=d/b.base);var g=Math.log(d);b.base!=Math.E&&(g/=Math.log(b.base)),g=Math.ceil(g);var h=Math.log(c);b.base!=Math.E&&(h/=Math.log(b.base)),h=Math.ceil(h),a.tickSize=Flotr.getTickSize(b.noTicks,h,g,b.tickDecimals===null?0:b.tickDecimals),b.minorTickFreq===null&&(g-h>10?b.minorTickFreq=0:g-h>5?b.minorTickFreq=2:b.minorTickFreq=5)}else a.tickSize=Flotr.getTickSize(b.noTicks,c,d,b.tickDecimals);a.min=c,a.max=d,b.min==null&&b.autoscale&&(a.min-=a.tickSize*e,a.min<0&&a.datamin>=0&&(a.min=0),a.min=a.tickSize*Math.floor(a.min/a.tickSize)),b.max==null&&b.autoscale&&(a.max+=a.tickSize*e,a.max>0&&a.datamax<=0&&a.datamax!=a.datamin&&(a.max=0),a.max=a.tickSize*Math.ceil(a.max/a.tickSize)),a.min==a.max&&(a.max=a.min+1)},calculateTextDimensions:function(a,b){var c="",d,e;if(this.options.showLabels)for(e=0;e<this.ticks.length;++e)d=this.ticks[e].label.length,d>c.length&&(c=this.ticks[e].label);this.maxLabel=a.dimensions(c,{size:b.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=a.dimensions(this.options.title,{size:b.fontSize*1.2,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(b,c){var d=this,e=this.options,f,g,h,i;a.isFunction(b)&&(b=b({min:d.min,max:d.max}));for(g=0;g<b.length;++g)i=b[g],typeof i=="object"?(f=i[0],h=i.length>1?i[1]:e.tickFormatter(f,{min:d.min,max:d.max})):(f=i,h=e.tickFormatter(f,{min:this.min,max:this.max})),c[g]={v:f,label:h}},_calculateTimeTicks:function(){var a=this,b=Flotr.Date.timeUnits,c=Flotr.Date.spec,d=(a.max-a.min)/a.options.noTicks,e,f,g;for(g=0;g<c.length-1;++g){var h=c[g][0]*b[c[g][1]];if(d<(h+c[g+1][0]*b[c[g+1][1]])/2&&h>=a.tickSize)break}e=c[g][0],f=c[g][1],f=="year"&&(e=Flotr.getTickSize(a.options.noTicks*b.year,a.min,a.max,0)),a.tickSize=e,a.tickUnit=f,a.ticks=Flotr.Date.generator(a)},_calculateLogTicks:function(){var a=this,b=a.options,c,d,e=Math.log(a.max);b.base!=Math.E&&(e/=Math.log(b.base)),e=Math.ceil(e);var f=Math.log(a.min);b.base!=Math.E&&(f/=Math.log(b.base)),f=Math.ceil(f);for(i=f;i<e;i+=a.tickSize){d=b.base==Math.E?Math.exp(i):Math.pow(b.base,i);var g=d*(b.base==Math.E?Math.exp(a.tickSize):Math.pow(b.base,a.tickSize)),h=(g-d)/b.minorTickFreq;a.ticks.push({v:d,label:b.tickFormatter(d,{min:a.min,max:a.max})});for(c=d+h;c<g;c+=h)a.minorTicks.push({v:c,label:b.tickFormatter(c,{min:a.min,max:a.max})})}d=b.base==Math.E?Math.exp(i):Math.pow(b.base,i),a.ticks.push({v:d,label:b.tickFormatter(d,{min:a.min,max:a.max})})},_calculateTicks:function(){var a=this,b=a.options,c=a.tickSize,d=a.min,e=a.max,f=c*Math.ceil(d/c),g,h,i,j,k,l;b.minorTickFreq&&(h=c/b.minorTickFreq);for(k=0;(i=j=f+k*c)<=e;++k){g=b.tickDecimals,g==null&&(g=1-Math.floor(Math.log(c)/Math.LN10)),g<0&&(g=0),i=i.toFixed(g),a.ticks.push({v:i,label:b.tickFormatter(i,{min:a.min,max:a.max})});if(b.minorTickFreq)for(l=0;l<b.minorTickFreq&&k*c+l*h<e;++l)i=(j+l*h).toFixed(g),a.minorTicks.push({v:i,label:b.tickFormatter(i,{min:a.min,max:a.max})})}},_setTranslations:function(a){this.d2p=a?f:d,this.p2d=a?g:e}},a.extend(c,{getAxes:function(a){return{x:new c({options:a.xaxis,n:1,length:this.plotWidth}),x2:new c({options:a.x2axis,n:2,length:this.plotWidth}),y:new c({options:a.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new c({options:a.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=c}(),function(){function b(b){a.extend(this,b)}var a=Flotr._;b.prototype={getRange:function(){var a=this.data,b=a.length,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=-Number.MAX_VALUE,f=-Number.MAX_VALUE,g,h,i,j,k;if(b<0||this.hide)return!1;for(k=0;k<b;k++)i=a[k][0],j=a[k][1],i<c&&(c=i,g=!0),i>e&&(e=i,g=!0),j<d&&(d=j,h=!0),j>f&&(f=j,h=!0);return{xmin:c,xmax:e,ymin:d,ymax:f,xused:g,yused:h}}},a.extend(b,{getSeries:function(c){return a.map(c,function(c){var d;return c.data?(d=new b,a.extend(d,c)):d=new b({data:c}),d})}}),Flotr.Series=b}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillColor:null,fillOpacity:.4,stacked:!1},draw:function(a){var b=this.ctx,c=a.lines.lineWidth,d=a.shadowSize,e;a=a||this.series,b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="round",d&&(b.lineWidth=d/2,e=c/2+b.lineWidth/2,b.strokeStyle="rgba(0,0,0,0.1)",this.lines.plot(a,e+d/2,!1),b.strokeStyle="rgba(0,0,0,0.2)",this.lines.plot(a,e,!1)),b.lineWidth=c,b.strokeStyle=a.color,this.lines.plot(a,0,!0),b.restore()},getStack:function(a){var b=!1;return a.lines.stacked&&(b=a.xaxis.getStack("bars"),Flotr._.isEmpty(b)&&(b.values=[])),b},plot:function(a,b,c){var d=this.ctx,e=a.xaxis,f=a.yaxis,g=a.data,h=g.length-1,i=this.plotWidth,j=this.plotHeight,k=null,l=null,m=this.lines.getStack(a),n=f.d2p(0),o,p,q,r,s,t,u;if(h<1)return;d.beginPath();for(u=0;u<h;++u){if(g[u][1]===null||g[u+1][1]===null)continue;if(e.options.scaling==="logarithmic"&&(g[u][0]<=0||g[u+1][0]<=0))continue;if(f.options.scaling==="logarithmic"&&(g[u][1]<=0||g[u+1][1]<=0))continue;o=e.d2p(g[u][0]),p=e.d2p(g[u+1][0]),m?(s=m.values[g[u][0]]||0,t=m.values[g[u+1][0]]||m.values[g[u][0]]||0,q=f.d2p(g[u][1]+s),r=f.d2p(g[u+1][1]+t),c&&(m.values[g[u][0]]=g[u][1]+s,u==h-1&&(m.values[g[u+1][0]]=g[u+1][1]+t))):(q=f.d2p(g[u][1]),r=f.d2p(g[u+1][1]));if(q>=j&&r>=i||q<=0&&r<=0||o<=0&&p<=0||o>=i&&p>=i)continue;(k!=o||l!=q+b)&&d.moveTo(o,q+b),k=p,l=r+b,d.lineTo(k,l)}d.stroke(),!b&&a.lines.fill&&(d.fillStyle=this.processColor(a.lines.fillColor||a.color,{opacity:a.lines.fillOpacity}),d.lineTo(p,n),d.lineTo(e.d2p(g[0][0]),n),d.lineTo(e.d2p(g[0][0]),f.d2p(g[0][1])),d.fill()),d.closePath()},extendYRange:function(a){var b=a.options;if(!b.max&&b.max!==0||!b.min&&b.min!==0){var c=a.max,d=a.min,e,f,g,h,i,j={},k={},l=null;for(f=0;f<this.series.length;++f){h=this.series[f],i=h.lines;if(i.show&&!h.hide&&h.yaxis==a&&i.stacked){for(g=0;g<h.data.length;g++)e=h.data[g][0]+"",h.data[g][1]>0?j[e]=(j[e]||0)+h.data[g][1]:k[e]=(k[e]||0)+h.data[g][1],l=h;for(g in j)c=Math.max(j[g],c);for(g in k)d=Math.min(k[g],d)}}a.lastSerie=l,a.max=c,a.min=d}}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0},draw:function(a){var b=this.ctx,c=a.bars.barWidth,d=Math.min(a.bars.lineWidth,c);b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="miter",b.lineWidth=d,b.strokeStyle=a.color;if(a.bars.fill){var e=a.bars.fillColor||a.color;b.fillStyle=this.processColor(e,{opacity:a.bars.fillOpacity})}this.bars.plot(a,c,0,a.bars.fill),b.restore()},getStack:function(a){var b=!1;return a.bars.stacked&&(b=(a.bars.horizontal?a.yaxis:a.xaxis).getStack("bars"),Flotr._.isEmpty(b)&&(b.positive=[],b.negative=[],b._positive=[],b._negative=[])),b},plot:function(a,b,c,d){if(a.data.length<1)return;var e=a.data,f=a.xaxis,g=a.yaxis,h=this.ctx,i=this.bars.getStack(a),j=this.options.shadowSize,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;for(z=0;z<e.length;z++){A=e[z][0],B=e[z][1];if(B===null)continue;n=0,o=0,i&&(a.bars.horizontal?(l=B,m=A):(l=A,m=B),n=i.positive[l]||0,o=i.negative[l]||0,m>0?i.positive[l]=n+m:i.negative[l]=o+m),k=a.bars.centered?b/2:0,a.bars.horizontal?(A>0?(v=n,w=A+n):(w=o,v=A+o),y=B-k,x=B+b-k):(B>0?(y=n,x=B+n):(x=o,y=B+o),v=A-k,w=A+b-k);if(w<f.min||v>f.max||x<g.min||y>g.max)continue;v<f.min&&(v=f.min),w>f.max&&(w=f.max),y<g.min&&(y=g.min),x>g.max&&(x=g.max),r=f.d2p(v),s=f.d2p(w),t=g.d2p(x),u=g.d2p(y),p=s-r,q=u-t,d&&h.fillRect(r,t,p,q),j&&(h.save(),h.fillStyle="rgba(0,0,0,0.05)",h.fillRect(r+j,t+j,p,q),h.restore()),a.bars.lineWidth!=0&&h.strokeRect(r,t,p,q)}},extendXRange:function(a){this.bars._extendRange(a)},extendYRange:function(a){this.bars._extendRange(a)},_extendRange:function(a){if(a.options.max==null){var b=a.min,c=a.max,d=a.orientation,e={},f={},g=null,h,i,j,k,l,m;for(j=0;j<this.series.length;++j){l=this.series[j],m=l.bars;if(m.show){(d==1&&!m.horizontal||d==-1&&m.horizontal)&&m.centered&&(c=Math.max(a.datamax+.5,c),b=Math.min(a.datamin-.5,b)),(d==1&&m.horizontal||d==-1&&!m.horizontal)&&m.barWidth+a.datamax>=c&&(c=a.max+(m.centered?m.barWidth/2:m.barWidth));if(m.stacked&&(d==1&&m.horizontal||d==-1&&!m.horizontal)){for(k=0;k<l.data.length;k++)m.show&&m.stacked&&(h=l.data[k][d==1?1:0]+"",i=d==1?0:1,l.data[k][i]>0?e[h]=(e[h]||0)+l.data[k][i]:f[h]=(f[h]||0)+l.data[k][i],g=l);for(k in e)c=Math.max(e[k],c);for(k in f)b=Math.min(f[k],b)}}}a.lastSerie=g,a.max=c,a.min=b}},drawHit:function(a){var b=this.octx,c=a.series,d=a.xaxis,e=a.yaxis,f,g,h,i;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.beginPath();if(c.mouse.trackAll)b.moveTo(d.d2p(a.x),e.d2p(0)),b.lineTo(d.d2p(a.x),e.d2p(a.yaxis.max));else{var j=c.bars.barWidth,k=e.d2p(a.y),l=d.d2p(a.x);c.bars.horizontal?(f=d.d2p(d.min<0?0:d.min),c.bars.centered?(h=e.d2p(a.y-j/2),i=e.d2p(a.y+j/2),b.moveTo(f,h),b.lineTo(l,h),b.lineTo(l,i),b.lineTo(f,i)):(i=e.d2p(a.y+j),b.moveTo(f,k),b.lineTo(l,k),b.lineTo(l,i),b.lineTo(f,i))):(h=e.d2p(e.min<0?0:e.min),c.bars.centered?(f=d.d2p(a.x-j/2),g=d.d2p(a.x+j/2),b.moveTo(f,h),b.lineTo(f,k),b.lineTo(g,k),b.lineTo(g,h)):(g=d.d2p(a.x+j),b.moveTo(l,h),b.lineTo(l,k),b.lineTo(g,k),b.lineTo(g,h))),c.mouse.fillColor&&b.fill()}b.stroke(),b.closePath(),b.restore()},clearHit:function(){var a=this.prevHit,b=this.plotOffset,c=a.series,d=a.xaxis,e=a.yaxis,f=c.bars.lineWidth,g=c.bars.barWidth;if(!c.bars.horizontal){var h=e.d2p(a.y>=0?a.y:0);c.bars.centered?this.octx.clearRect(d.d2p(a.x-g/2)+b.left-f,h+b.top-f,d.d2p(g+d.min)+f*2,e.d2p(a.y<0?a.y:0)-h+f*2):this.octx.clearRect(d.d2p(a.x)+b.left-f,h+b.top-f,d.d2p(g+d.min)+f*2,e.d2p(a.y<0?a.y:0)-h+f*2)}else{var i=d.d2p(a.x>=0?a.x:0);c.bars.centered?this.octx.clearRect(i+b.left+f,e.d2p(a.y+g/2)+b.top-f,d.d2p(a.x<0?a.x:0)-i-f*2,e.d2p(g+e.min)+f*2):this.octx.clearRect(i+b.left+f,e.d2p(a.y+g)+b.top-f,d.d2p(a.x<0?a.x:0)-i-f*2,e.d2p(g+e.min)+f*2)}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(a){var b=this.ctx,c=this.options;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineWidth=a.bubbles.lineWidth,b.fillStyle="rgba(0,0,0,0.05)",b.strokeStyle="rgba(0,0,0,0.05)",this.bubbles.plot(a,a.shadowSize/2),b.strokeStyle="rgba(0,0,0,0.1)",this.bubbles.plot(a,a.shadowSize/4),b.strokeStyle=a.color,b.fillStyle=this.processColor(a.color,{opacity:a.radar.fillOpacity}),this.bubbles.plot(a),b.restore()},plot:function(a,b){var c=this.ctx,d=this.options,e=a.data,f=d.bubbles.baseRadius;b=b||0;for(var g=0;g<e.length;++g){var h=e[g][0],i=e[g][1],j=e[g][2];c.beginPath(),c.arc(a.xaxis.d2p(h)+b,a.yaxis.d2p(i)+b,f*j,0,Math.PI*2,!0),c.stroke(),a.bubbles.fill&&c.fill(),c.closePath()}},drawHit:function(a){var b=this.octx,c=a.series,d=a.xaxis,e=a.yaxis,f=c.data[0][2],g=this.options.bubbles.baseRadius;b.save(),b.lineWidth=c.points.lineWidth,b.strokeStyle=c.mouse.lineColor,b.fillStyle=this.processColor(c.mouse.fillColor||"#ffffff",{opacity:c.mouse.fillOpacity}),b.translate(this.plotOffset.left,this.plotOffset.top),b.beginPath(),b.arc(d.d2p(a.x),e.d2p(a.y),f*g,0,2*Math.PI,!0),b.fill(),b.stroke(),b.closePath(),b.restore()},clearHit:function(){var a=this.prevHit,b=this.plotOffset,c=a.series,d=c.bars.lineWidth,e=a.xaxis,f=a.yaxis,g=c.data[0][2],h=this.options.bubbles.baseRadius,i=g*h+d;this.octx.clearRect(b.left+e.d2p(a.x)-i,b.top+f.d2p(a.y)-i,i*2,i*2)}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(a){var b=this.ctx,c=a.candles.candleWidth;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="miter",b.lineWidth=a.candles.lineWidth,this.candles.plotShadows(a,c/2),this.candles.plot(a,c/2),b.restore()},plot:function(a,b){var c=a.data;if(c.length<1)return;var d=a.xaxis,e=a.yaxis,f=this.ctx;for(var g=0;g<c.length;g++){var h=c[g],i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=i-a.candles.candleWidth/2,o=i+a.candles.candleWidth/2,p=Math.max(e.min,l),q=Math.min(e.max,k),r=Math.max(e.min,Math.min(j,m)),s=Math.min(e.max,Math.max(j,m));if(o<d.min||n>d.max||q<e.min||p>e.max)continue;var t=a.candles[j>m?"downFillColor":"upFillColor"];a.candles.fill&&!a.candles.barcharts&&(f.fillStyle=this.processColor(t,{opacity:a.candles.fillOpacity}),f.fillRect(d.d2p(n),e.d2p(s)+b,d.d2p(o)-d.d2p(n),e.d2p(r)-e.d2p(s)));if(a.candles.lineWidth||a.candles.wickLineWidth){var i,u,v=a.candles.wickLineWidth%2/2;i=Math.floor(d.d2p((n+o)/2))+v,f.save(),f.strokeStyle=t,f.lineWidth=a.candles.wickLineWidth,f.lineCap="butt",a.candles.barcharts?(f.beginPath(),f.moveTo(i,Math.floor(e.d2p(q)+b)),f.lineTo(i,Math.floor(e.d2p(p)+b)),u=Math.floor(e.d2p(j)+b)+.5,f.moveTo(Math.floor(d.d2p(n))+v,u),f.lineTo(i,u),u=Math.floor(e.d2p(m)+b)+.5,f.moveTo(Math.floor(d.d2p(o))+v,u),f.lineTo(i,u)):(f.strokeRect(d.d2p(n),e.d2p(s)+b,d.d2p(o)-d.d2p(n),e.d2p(r)-e.d2p(s)),f.beginPath(),f.moveTo(i,Math.floor(e.d2p(s)+b)),f.lineTo(i,Math.floor(e.d2p(q)+b)),f.moveTo(i,Math.floor(e.d2p(r)+b)),f.lineTo(i,Math.floor(e.d2p(p)+b))),f.stroke(),f.closePath(),f.restore()}}},plotShadows:function(a,b){var c=a.data;if(c.length<1||a.candles.barcharts)return;var d=a.xaxis,e=a.yaxis,f=this.options.shadowSize;for(var g=0;g<c.length;g++){var h=c[g],i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=i-a.candles.candleWidth/2,o=i+a.candles.candleWidth/2,p=Math.max(e.min,Math.min(j,m)),q=Math.min(e.max,Math.max(j,m));if(o<d.min||n>d.max||q<e.min||p>e.max)continue;var r=d.d2p(o)-d.d2p(n)-(d.d2p(o)+f<=this.plotWidth?0:f),s=Math.max(0,e.d2p(p)-e.d2p(q)-(e.d2p(p)+f<=this.plotHeight?0:f));this.ctx.fillStyle="rgba(0,0,0,0.05)",this.ctx.fillRect(Math.min(d.d2p(n)+f,this.plotWidth),Math.min(e.d2p(q)+f,this.plotWidth),r,s)}},extendXRange:function(a){if(a.options.max==null){var b=a.min,c=a.max,d,e;for(d=0;d<this.series.length;++d)e=this.series[d].candles,e.show&&this.series[d].xaxis==a&&(c=Math.max(a.datamax+.5,c),b=Math.min(a.datamin-.5,b));a.max=c,a.min=b}}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(a){var b=this.ctx,c=a.gantt.barWidth,d=Math.min(a.gantt.lineWidth,c);b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="miter",b.lineWidth=d,b.strokeStyle=a.color,b.save(),this.gantt.plotShadows(a,c,0,a.gantt.fill),b.restore();if(a.gantt.fill){var e=a.gantt.fillColor||a.color;b.fillStyle=this.processColor(e,{opacity:a.gantt.fillOpacity})}this.gantt.plot(a,c,0,a.gantt.fill),b.restore()},plot:function(a,b,c,d){var e=a.data;if(e.length<1)return;var f=a.xaxis,g=a.yaxis,h=this.ctx,i;for(i=0;i<e.length;i++){var j=e[i][0],k=e[i][1],l=e[i][2],m=!0,n=!0,o=!0;if(k===null||l===null)continue;var p=k,q=k+l,r=j-(a.gantt.centered?b/2:0),s=j+b-(a.gantt.centered?b/2:0);if(q<f.min||p>f.max||s<g.min||r>g.max)continue;p<f.min&&(p=f.min,m=!1),q>f.max&&(q=f.max,f.lastSerie!=a&&(n=!1)),r<g.min&&(r=g.min),s>g.max&&(s=g.max,g.lastSerie!=a&&(n=!1)),d&&(h.beginPath(),h.moveTo(f.d2p(p),g.d2p(r)+c),h.lineTo(f.d2p(p),g.d2p(s)+c),h.lineTo(f.d2p(q),g.d2p(s)+c),h.lineTo(f.d2p(q),g.d2p(r)+c),h.fill(),h.closePath()),a.gantt.lineWidth!=0&&(m||o||n)&&(h.beginPath(),h.moveTo(f.d2p(p),g.d2p(r)+c),h[m?"lineTo":"moveTo"](f.d2p(p),g.d2p(s)+c),h[n?"lineTo":"moveTo"](f.d2p(q),g.d2p(s)+c),h[o?"lineTo":"moveTo"](f.d2p(q),g.d2p(r)+c),h.stroke(),h.closePath())}},plotShadows:function(a,b,c){var d=a.data;if(d.length<1)return;var e,f,g,h,i=a.xaxis,j=a.yaxis,k=this.ctx,l=this.options.shadowSize;for(e=0;e<d.length;e++){f=d[e][0],g=d[e][1],h=d[e][2];if(g===null||h===null)continue;var m=g,n=g+h,o=f-(a.gantt.centered?b/2:0),p=f+b-(a.gantt.centered?b/2:0);if(n<i.min||m>i.max||p<j.min||o>j.max)continue;m<i.min&&(m=i.min),n>i.max&&(n=i.max),o<j.min&&(o=j.min),p>j.max&&(p=j.max);var q=i.d2p(n)-i.d2p(m)-(i.d2p(n)+l<=this.plotWidth?0:l),r=j.d2p(o)-j.d2p(p)-(j.d2p(o)+l<=this.plotHeight?0:l);k.fillStyle="rgba(0,0,0,0.05)",k.fillRect(Math.min(i.d2p(m)+l,this.plotWidth),Math.min(j.d2p(p)+l,this.plotHeight),q,r)}},extendXRange:function(a){if(a.options.max==null){var b=a.min,c=a.max,d,e,f,g,h,i={},j={},k=null;for(d=0;d<this.series.length;++d){g=this.series[d],h=g.gantt;if(h.show&&g.xaxis==a){for(e=0;e<g.data.length;e++)h.show&&(y=g.data[e][0]+"",i[y]=Math.max(i[y]||0,g.data[e][1]+g.data[e][2]),k=g);for(e in i)c=Math.max(i[e],c)}}a.lastSerie=k,a.max=c,a.min=b}},extendYRange:function(a){if(a.options.max==null){var b=Number.MIN_VALUE,c=Number.MAX_VALUE,d,e,f,g,h={},i={},j=null;for(d=0;d<this.series.length;++d){f=this.series[d],g=f.gantt;if(g.show&&!f.hide&&f.yaxis==a){var k=Number.MIN_VALUE,l=Number.MAX_VALUE;for(e=0;e<f.data.length;e++)k=Math.max(k,f.data[e][0]),l=Math.min(l,f.data[e][0]);g.centered?(b=Math.max(k+.5,b),c=Math.min(l-.5,c)):(b=Math.max(k+1,b),c=Math.min(l,c)),g.barWidth+k>b&&(b=a.max+g.barWidth)}}a.lastSerie=j,a.max=b,a.min=c,a.tickSize=Flotr.getTickSize(a.options.noTicks,c,b,a.options.tickDecimals)}}}),function(){function a(a){return typeof a=="object"&&a.constructor&&(Image?!0:a.constructor===Image)}Flotr.defaultMarkerFormatter=function(a){return Math.round(a.y*100)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},getStack:function(a){var b=!1;return a.bars.stacked&&(b=(a.bars.horizontal?a.yaxis:a.xaxis).getStack("bars"),Flotr._.isEmpty(b)&&(b.positive=[],b.negative=[],b.values=[])),b},draw:function(a){a=a||this.series;var b=this.ctx,c=a.xaxis,d=a.yaxis,e=a.markers,f=this.markers.getStack(a),g=a.data;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="round",b.lineWidth=e.lineWidth,b.strokeStyle="rgba(0,0,0,0.5)",b.fillStyle=this.processColor(e.fillColor,{opacity:e.fillOpacity});for(var h=0;h<g.length;++h){var i=g[h][0],j=g[h][1],k;if(f)if(a.markers.stackingType=="b"){var l=0,m=0;a.markers.horizontal?(l=f.positive[j]||0,m=f.negative[j]||0,i>0?(f.positive[j]=l+i,i=l+i):(f.negative[j]=m+i,i=m+i)):(l=f.negative[i]||0,m=f.positive[i]||0,j>0?(f.positive[i]=l+j,j=l+j):(f.negative[i]=m+j,j=m+j))}else if(a.markers.stackingType=="a"){var n=f.values[i]||0;f.values[i]=n+j,j=n+j}var o=c.d2p(i),p=d.d2p(j);k=e.labelFormatter({x:i,y:j,index:h,data:g}),this.markers.plot(o,p,k,e)}b.restore()},plot:function(b,c,d,e){a(d)&&!d.complete?Flotr.EventAdapter.observe(d,"load",Flotr._.bind(function(){var a=this.ctx;a.save(),a.translate(this.plotOffset.left,this.plotOffset.top),this.markers._plot(b,c,d,e),a.restore()},this)):this.markers._plot(b,c,d,e)},_plot:function(b,c,d,e){var f=this.ctx,g=2,h=b,i=c,j;a(d)?j={height:d.height,width:d.width}:j=this._text.canvas(d),j.width=Math.floor(j.width+g*2),j.height=Math.floor(j.height+g*2),e.position.indexOf("c")!=-1?h-=j.width/2+g:e.position.indexOf("l")!=-1&&(h-=j.width),e.position.indexOf("m")!=-1?i-=j.height/2+g:e.position.indexOf("t")!=-1&&(i-=j.height),h=Math.floor(h)+.5,i=Math.floor(i)+.5,e.fill&&f.fillRect(h,i,j.width,j.height),e.stroke&&f.strokeRect(h,i,j.width,j.height),a(d)?f.drawImage(d,h+g,i+g):Flotr.drawText(f,d,h+g,i+g,{textBaseline:"top",textAlign:"left",size:e.fontSize,color:e.color})}})}(),function(){var a=Flotr._;Flotr.defaultPieLabelFormatter=function(a){return(a.fraction*100).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20},draw:function(b){if(this.options.pie.drawn)return;var c=this.ctx,d=this.options,e=b.pie.lineWidth,f=b.shadowSize,g=b.data,h=this.plotOffset,i=Math.min(this.canvasWidth,this.canvasHeight)*b.pie.sizeRatio/2,j=[],k=1,l=Math.sin(b.pie.viewAngle)*b.pie.spliceThickness/k,m={size:d.fontSize*1.2,color:d.grid.color,weight:1.5},n={x:h.left+this.plotWidth/2,y:h.top+this.plotHeight/2},o=this.pie._getPortions(),p=this.pie._getSlices(o,b);c.save(),f>0&&a.each(p,function(a){if(a.startAngle==a.endAngle)return;var d=(a.startAngle+a.endAngle)/2,e=n.x+Math.cos(d)*a.options.explode+f,g=n.y+Math.sin(d)*a.options.explode+f;this.pie.plotSlice(e,g,i,a.startAngle,a.endAngle,!1,k),b.pie.fill&&(c.fillStyle="rgba(0,0,0,0.1)",c.fill())},this);if(d.HtmlText||!this.textEnabled)j=[];a.each(p,function(a,f){if(a.startAngle==a.endAngle)return;var g=(a.startAngle+a.endAngle)/2,h=a.series.color,l=a.options.fillColor||h,o=n.x+Math.cos(g)*a.options.explode,p=n.y+Math.sin(g)*a.options.explode;this.pie.plotSlice(o,p,i,a.startAngle,a.endAngle,!1,k),b.pie.fill&&(c.fillStyle=this.processColor(l,{opacity:b.pie.fillOpacity}),c.fill()),c.lineWidth=e,c.strokeStyle=h,c.stroke();var q=d.pie.labelFormatter(a),r=Math.cos(g)<0,s=Math.sin(g)>0,t=(a.options.explode||b.pie.explode)+i+4,u=n.x+Math.cos(g)*t,v=n.y+Math.sin(g)*t;if(a.fraction&&q)if(d.HtmlText||!this.textEnabled){var w=s?v-5:this.plotHeight-v+5,x="position:absolute;"+(s?"top":"bottom")+":"+w+"px;";r?x+="right:"+(this.canvasWidth-u)+"px;text-align:right;":x+="left:"+u+"px;text-align:left;",j.push('<div style="',x,'" class="flotr-grid-label">',q,"</div>")}else m.textAlign=r?"right":"left",m.textBaseline=s?"top":"bottom",Flotr.drawText(c,q,u,v,m)},this);if(d.HtmlText||!this.textEnabled){var q=Flotr.DOM.node('<div style="color:'+this.options.grid.color+'" class="flotr-labels"></div>');Flotr.DOM.insert(q,j.join("")),Flotr.DOM.insert(this.el,q)}c.restore(),d.pie.drawn=!0},plotSlice:function(a,b,c,d,e,f,g){var h=this.ctx;g=g||1,h.scale(1,g),h.beginPath(),h.moveTo(a,b),h.arc(a,b,c,d,e,f),h.lineTo(a,b),h.closePath()},hit:function(a,b){function m(a){return a>0?a:a+2*Math.PI}var c=this.series,d=this.options,e=Math.min(this.canvasWidth,this.canvasHeight)*d.pie.sizeRatio/2,f=1,g=d.pie.startAngle,h,j,k,l;h={x:this.plotWidth/2,y:this.plotHeight/2},portions=this.pie._getPortions(),slices=this.pie._getSlices(portions,c,g);for(i=0;i<c.length;i++){j=c[i],k=j.data[0][0],l=j.data[0][1];if(l===null)continue;var n=a.relX-h.x,o=a.relY-h.y,p=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),q=m(slices[i].startAngle%(2*Math.PI)),r=m(slices[i].endAngle%(2*Math.PI)),s=o/p,t=m(Math.asin(s)%(2*Math.PI)),u=Math.asin(-s)+Math.PI;p<e+10&&(n>0&&q<t&&r>t||n<0&&q<u&&r>u||(q>r||slices[i].fraction==1)&&(n>0&&(q<t||r>t)||n<0&&(q<u||r>u)))&&(b.x=k,b.y=l,b.sAngle=q,b.eAngle=r,b.mouse=j.mouse,b.series=j,b.allSeries=c,b.seriesIndex=i,b.fraction=slices[i].fraction)}},drawHit:function(a){var b=this.octx,c=a.series,d=a.xaxis,e=a.yaxis;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.beginPath();if(c.mouse.trackAll)b.moveTo(d.d2p(a.x),e.d2p(0)),b.lineTo(d.d2p(a.x),e.d2p(a.yaxis.max));else{var f={x:this.plotWidth/2,y:this.plotHeight/2},g=Math.min(this.canvasWidth,this.canvasHeight)*c.pie.sizeRatio/2,h=a.sAngle<a.eAngle?(a.sAngle+a.eAngle)/2:(a.sAngle+a.eAngle+2*Math.PI)/2,i=f.x+Math.cos(h)*a.series.pie.explode,j=f.y+Math.sin(h)*a.series.pie.explode;b.beginPath(),b.moveTo(i,j),a.fraction!=1?b.arc(i,j,g,a.sAngle,a.eAngle,!1):b.arc(i,j,g,a.sAngle,a.eAngle-1e-5,!1),b.lineTo(i,j),b.closePath()}b.stroke(),b.closePath(),b.restore()},clearHit:function(){var a={x:this.plotOffset.left+this.plotWidth/2,y:this.plotOffset.top+this.plotHeight/2},b=this.prevHit.series.pie,c=Math.min(this.canvasWidth,this.canvasHeight)*b.sizeRatio/2,d=(b.explode+b.lineWidth)*4;this.octx.clearRect(a.x-c-d,a.y-c-d,2*(c+d),2*(c+d))},_getPortions:function(){return a.map(this.series,function(a,b){if(a.pie.show&&a.data[0][1]!==null)return{name:a.label||a.data[0][1],value:[b,a.data[0][1]],options:a.pie,series:a}})},_getSum:function(b){return a.inject(a.pluck(a.pluck(b,"value"),1),function(a,b){return a+b},0)},_getSlices:function(b,c,d){var e=this.pie._getSum(b),f=0,g=a.isUndefined(d)?c.pie.startAngle:d,h=0;return a.map(b,function(a){return g+=f,h=parseFloat(a.value[1]),f=h/e,{name:a.name,fraction:f,x:a.value[0],y:h,value:h,options:a.options,series:a.series,startAngle:2*g*Math.PI,endAngle:2*(g+f)*Math.PI}})}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:.4},draw:function(a){var b=this.ctx,c=a.lines.lineWidth,d=a.shadowSize;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),d>0&&(b.lineWidth=d/2,b.strokeStyle="rgba(0,0,0,0.1)",this.points.plotShadows(a,d/2+b.lineWidth/2,a.points.radius),b.strokeStyle="rgba(0,0,0,0.2)",this.points.plotShadows(a,b.lineWidth/2,a.points.radius)),b.lineWidth=a.points.lineWidth,b.strokeStyle=a.color,b.fillStyle=a.points.fillColor?a.points.fillColor:a.color,this.points.plot(a,a.points.radius,a.points.fill),b.restore()},plot:function(a,b,c){var d=a.xaxis,e=a.yaxis,f=this.ctx,g=a.data,h,i,j;for(h=g.length-1;h>-1;--h){i=g[h][0],j=g[h][1];if(j===null||i<d.min||i>d.max||j<e.min||j>e.max)continue;f.beginPath(),f.arc(d.d2p(i),e.d2p(j),b,0,2*Math.PI,!0),c&&f.fill(),f.stroke(),f.closePath()}},plotShadows:function(a,b,c){var d=a.xaxis,e=a.yaxis,f=this.ctx,g=a.data,h,i,j;for(h=g.length-1;h>-1;--h){i=g[h][0],j=g[h][1];if(j===null||i<d.min||i>d.max||j<e.min||j>e.max)continue;f.beginPath(),f.arc(d.d2p(i),e.d2p(j)+b,c,0,Math.PI,!1),f.stroke(),f.closePath()}},getHit:function(a,b){var c,d,e,f,g,h,i,j=a.points,k=a.data,l=a.mouse.sensibility*(j.lineWidth+j.radius),m={index:null,series:a,distance:Number.MAX_VALUE,x:null,y:null,precision:1};for(e=k.length-1;e>-1;--e)f=k[e],h=a.xaxis.d2p(f[0]),i=a.yaxis.d2p(f[1]),c=h-b.relX,d=i-b.relY,g=Math.sqrt(c*c+d*d),g<l&&g<m.distance&&(m={index:e,series:a,distance:g,data:f,x:h,y:i,precision:1});return m},drawHit:function(a,b){},clearHit:function(a,b){}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9},draw:function(a){var b=this.ctx,c=this.options;b.save(),b.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),b.lineWidth=a.radar.lineWidth,b.fillStyle="rgba(0,0,0,0.05)",b.strokeStyle="rgba(0,0,0,0.05)",this.radar.plot(a,a.shadowSize/2),b.strokeStyle="rgba(0,0,0,0.1)",this.radar.plot(a,a.shadowSize/4),b.strokeStyle=a.color,b.fillStyle=this.processColor(a.color,{opacity:a.radar.fillOpacity}),this.radar.plot(a),b.restore()},plot:function(a,b){var c=this.ctx,d=this.options,e=a.data,f=Math.min(this.plotHeight,this.plotWidth)*d.radar.radiusRatio/2,g=2*(Math.PI/e.length),h=-Math.PI/2;b=b||0,c.beginPath();for(var i=0;i<e.length;++i){var j=e[i][0],k=e[i][1],l=k/this.axes.y.max;c[i==0?"moveTo":"lineTo"](Math.cos(i*g+h)*f*l+b,Math.sin(i*g+h)*f*l+b)}c.closePath(),a.radar.fill&&c.fill(),c.stroke()}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(a){var b=this.ctx,c=a.timeline.barWidth,d=a.timeline.lineWidth,e=a.color,f=a.timeline.fillColor||e,g=a.timeline.fillOpacity;b.save(),b.translate(this.plotOffset.left,this.plotOffset.top),b.lineJoin="miter",b.lineWidth=d,b.strokeStyle=e,b.fillStyle=this.processColor(f,{opacity:g}),this.timeline.plot(a,c,d),b.restore()},plot:function(a,b,c){var d=a.data,e=a.xaxis,f=a.yaxis,g=this.ctx,h;Flotr._.each(d,function(a){var d=a[0],h=a[1],i=a[2],j=b,k=Math.ceil(e.d2p(d)),l=Math.ceil(e.d2p(d+i))-k,m=Math.round(f.d2p(h)),n=Math.round(f.d2p(h-j))-m,o=k-c/2,p=Math.round(m-n/2)-c/2;g.strokeRect(o,p,l,n),g.fillRect(o,p,l,n)},this)},extendRange:function(a){var b=a.data,c=a.xaxis,d=a.yaxis,e=a.timeline.barWidth;c.options.min==null&&(c.min=c.datamin-e/2);if(c.options.max==null){var f=c.max;Flotr._.each(b,function(a){f=Math.max(f,a[0]+a[2])},this),c.max=f+e/2}d.options.min==null&&(d.min=d.datamin-e),d.options.min==null&&(d.max=d.datamax+e)}}),function(){var a=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(a,b){this.options.crosshair.mode&&this.crosshair.clearCrosshair(),this.options.crosshair.mode&&this.crosshair.drawCrosshair(b)}},drawCrosshair:function(b){var c=this.octx,d=this.options.crosshair,e=this.plotOffset,f=e.left+b.relX+.5,g=e.top+b.relY+.5;if(b.relX<0||b.relY<0||b.relX>this.plotWidth||b.relY>this.plotHeight){this.el.style.cursor=null,a.removeClass(this.el,"flotr-crosshair");return}this.lastMousePos.relX=null,this.lastMousePos.relY=null,d.hideCursor&&(this.el.style.cursor="none",a.addClass(this.el,"flotr-crosshair")),c.save(),c.strokeStyle=d.color,c.lineWidth=1,c.beginPath(),d.mode.indexOf("x")!=-1&&(c.moveTo(f,e.top),c.lineTo(f,e.top+this.plotHeight),this.lastMousePos.relX=f),d.mode.indexOf("y")!=-1&&(c.moveTo(e.left,g),c.lineTo(e.left+this.plotWidth,g),this.lastMousePos.relY=g),c.stroke(),c.restore()},clearCrosshair:function(){this.lastMousePos.relX!=null&&this.octx.clearRect(this.lastMousePos.relX-.5,this.plotOffset.top,1,this.plotHeight+1),this.lastMousePos.relY!=null&&this.octx.clearRect(this.plotOffset.left,this.lastMousePos.relY-.5,this.plotWidth+1,1)}})}(),function(){var a=Flotr.DOM,b=Flotr._;Flotr.addPlugin("download",{saveImage:function(c,d,e,f){var g=null;if(Flotr.isIE&&Flotr.isIE<9)return g="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(g);switch(c){case"jpeg":case"jpg":g=Canvas2Image.saveAsJPEG(this.canvas,f,d,e);break;default:case"png":g=Canvas2Image.saveAsPNG(this.canvas,f,d,e);break;case"bmp":g=Canvas2Image.saveAsBMP(this.canvas,f,d,e)}b.isElement(g)&&f&&(this.download.restoreCanvas(),a.hide(this.canvas),a.hide(this.overlay),a.setStyles({position:"absolute"}),a.insert(this.el,g),this.saveImageElement=g)},restoreCanvas:function(){a.show(this.canvas),a.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var a=Flotr.EventAdapter,b=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){var c,d=this.options,e=this.ctx,f;(d.grid.verticalLines||d.grid.minorVerticalLines||d.grid.horizontalLines||d.grid.minorHorizontalLines)&&a.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,d,this]),e.save(),e.lineWidth=1,e.strokeStyle=d.grid.tickColor;if(d.grid.circular){e.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);var g=Math.min(this.plotHeight,this.plotWidth)*d.radar.radiusRatio/2,h=this.axes.x.ticks.length,i=2*(Math.PI/h),j=-Math.PI/2;e.beginPath();if(d.grid.horizontalLines){f=this.axes.y;for(var k=0;k<f.ticks.length;++k){c=f.ticks[k].v;var l=c/f.max;for(var m=0;m<=h;++m)e[m==0?"moveTo":"lineTo"](Math.cos(m*i+j)*g*l,Math.sin(m*i+j)*g*l)}}d.grid.minorHorizontalLines&&(f=this.axes.y,b.each(b.pluck(f.minorTicks,"v"),function(a){var b=a/f.max;for(var c=0;c<=h;++c)e[c==0?"moveTo":"lineTo"](Math.cos(c*i+j)*g*b,Math.sin(c*i+j)*g*b)})),d.grid.verticalLines&&b.times(h,function(a){e.moveTo(0,0),e.lineTo(Math.cos(a*i+j)*g,Math.sin(a*i+j)*g)}),e.stroke()}else e.translate(this.plotOffset.left,this.plotOffset.top),d.grid.backgroundColor!=null&&(e.fillStyle=this.processColor(d.grid.backgroundColor,{x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight}),e.fillRect(0,0,this.plotWidth,this.plotHeight)),e.beginPath(),d.grid.verticalLines&&(f=this.axes.x,b.each(b.pluck(f.ticks,"v"),function(a){if(a<=f.min||a>=f.max||(a==f.min||a==f.max)&&d.grid.outlineWidth!=0)return;e.moveTo(Math.floor(f.d2p(a))+e.lineWidth/2,0),e.lineTo(Math.floor(f.d2p(a))+e.lineWidth/2,this.plotHeight)},this)),d.grid.minorVerticalLines&&(f=this.axes.x,b.each(b.pluck(f.minorTicks,"v"),function(a){if(a<=f.min||a>=f.max||(a==f.min||a==f.max)&&d.grid.outlineWidth!=0)return;e.moveTo(Math.floor(f.d2p(a))+e.lineWidth/2,0),e.lineTo(Math.floor(f.d2p(a))+e.lineWidth/2,this.plotHeight)},this)),d.grid.horizontalLines&&(f=this.axes.y,b.each(b.pluck(f.ticks,"v"),function(a){if(a<=f.min||a>=f.max||(a==f.min||a==f.max)&&d.grid.outlineWidth!=0)return;e.moveTo(0,Math.floor(f.d2p(a))+e.lineWidth/2),e.lineTo(this.plotWidth,Math.floor(f.d2p(a))+e.lineWidth/2)},this)),d.grid.minorHorizontalLines&&(f=this.axes.y,b.each(b.pluck(f.ticks,"v"),function(a){if(a<=f.min||a>=f.max||(a==f.min||a==f.max)&&d.grid.outlineWidth!=0)return;e.moveTo(0,Math.floor(f.d2p(a))+e.lineWidth/2),e.lineTo(this.plotWidth,Math.floor(f.d2p(a))+e.lineWidth/2)},this)),e.stroke();e.restore(),(d.grid.verticalLines||d.grid.minorVerticalLines||d.grid.horizontalLines||d.grid.minorHorizontalLines)&&a.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,d,this])},drawOutline:function(){var a,b=this.options,c=this.ctx;if(b.grid.outlineWidth==0)return;c.save();if(b.grid.circular){c.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);var d=Math.min(this.plotHeight,this.plotWidth)*b.radar.radiusRatio/2,e=this.axes.x.ticks.length,f=2*(Math.PI/e),g=-Math.PI/2;c.beginPath(),c.lineWidth=b.grid.outlineWidth,c.strokeStyle=b.grid.color,c.lineJoin="round";for(var h=0;h<=e;++h)c[h==0?"moveTo":"lineTo"](Math.cos(h*f+g)*d,Math.sin(h*f+g)*d);c.stroke()}else{c.translate(this.plotOffset.left,this.plotOffset.top);var i=b.grid.outlineWidth,j=.5-i+(i+1)%2/2;c.lineWidth=i,c.strokeStyle=b.grid.color,c.lineJoin="miter",c.strokeRect(j,j,this.plotWidth,this.plotHeight)}c.restore()}})}(),function(){var a=Flotr.DOM,b=Flotr._;Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(a,c){(this.options.mouse.track||b.any(this.series,function(a){return a.mouse&&a.mouse.track}))&&this.hit.hit(c)},mouseout:function(){this.hit.clearHit()}},executeOnType:function(a,c,d){function f(a){b.each(b.keys(flotr.graphTypes),function(f){if(a[f]&&a[f].show)try{b.isUndefined(d)?this[f][c].apply(this[f]):this[f][c].apply(this[f],d),e=!0}catch(g){}},this)}var e=!1;return b.isArray(a)||(a=[a]),b.each(a,f,this),e},drawHit:function(a){var b=this.octx,c=a.series;if(c.mouse.lineColor!=null){b.save(),b.lineWidth=c.points?c.points.lineWidth:1,b.strokeStyle=c.mouse.lineColor,b.fillStyle=this.processColor(c.mouse.fillColor||"#ffffff",{opacity:c.mouse.fillOpacity});if(!this.hit.executeOnType(c,"drawHit",[a])){var d=a.xaxis,e=a.yaxis;b.translate(this.plotOffset.left,this.plotOffset.top),b.beginPath(),b.arc(d.d2p(a.x),e.d2p(a.y),c.mouse.radius,0,2*Math.PI,!0),b.fill(),b.stroke(),b.closePath()}b.restore()}this.prevHit=a},clearHit:function(){var b=this.prevHit;if(b&&!this.hit.executeOnType(b.series,"clearHit")){var c=this.plotOffset,d=b.series,e=d.bars?d.bars.lineWidth:1,f=d.mouse.radius+e;this.octx.clearRect(c.left+b.xaxis.d2p(b.x)-f,c.top+b.yaxis.d2p(b.y)-f,f*2,f*2),a.hide(this.mouseTrack)}},hit:function(b){var c=this.series,d=this.options,e=this.prevHit,f=this.plotOffset,g=this.octx,h,i,j,k,l,m,n,o,p,q,r,s={dist:Number.MAX_VALUE,x:null,y:null,relX:b.relX,relY:b.relY,absX:b.absX,absY:b.absY,sAngle:null,eAngle:null,fraction:null,mouse:null,xaxis:null,yaxis:null,series:null,index:null,seriesIndex:null};if(d.mouse.trackAll)for(r=0;r<c.length;r++){B=c[0],h=B.data,n=B.xaxis,o=B.yaxis,j=2*d.points.lineWidth/n.scale*B.mouse.sensibility,p=n.p2d(b.relX),q=o.p2d(b.relY);for(var t=0;t<h.length;t++){l=h[t][0],m=h[t][1];if(m===null||n.min>l||n.max<l||o.min>m||o.max<m||p<n.min||p>n.max||q<o.min||q>o.max)continue;var u=Math.abs(l-p);if(!B.bars.show&&u<j||B.bars.show&&u<B.bars.barWidth/2||m<0&&q<0&&q>m){var v=u;v<s.dist&&(s.dist=v,s.x=l,s.y=m,s.xaxis=n,s.yaxis=o,s.mouse=B.mouse,s.series=B,s.allSeries=c,s.index=t)}}}else if(!this.hit.executeOnType(c,"hit",[b,s]))for(r=0;r<c.length;r++){B=c[r];if(!B.mouse.track)continue;h=B.data,n=B.xaxis,o=B.yaxis,i=2*(d.points?d.points.lineWidth:1)*B.mouse.sensibility,j=i/n.scale,k=i/o.scale,p=n.p2d(b.relX),q=o.p2d(b.relY);for(var t=0,w,x;t<h.length;t++){l=h[t][0],m=h[t][1];if(m===null||n.min>l||n.max<l||o.min>m||o.max<m)continue;if(B.bars.show&&B.bars.centered)var u=Math.abs(l-p),y=Math.abs(m-q);else if(B.bars.horizontal)var u=Math.abs(l-p),y=Math.abs(m+B.bars.barWidth/2-q);else var u=Math.abs(l+B.bars.barWidth/2-p),y=Math.abs(m-q);if(!B.bars.show&&u<j&&(!B.mouse.trackY||y<k)||B.bars.show&&!B.bars.horizontal&&u<B.bars.barWidth/2+1/n.scale&&(!B.mouse.trackY||m>0&&q>0&&q<m||m<0&&q<0&&q>m)||B.bars.horizontal&&y<B.bars.barWidth/2+1/o.scale&&(l>0&&p>0&&p<l||l<0&&p<0&&p>l)){var v=Math.sqrt(u*u+y*y);v<s.dist&&(s.dist=v,s.x=l,s.y=m,s.xaxis=n,s.yaxis=o,s.mouse=B.mouse,s.series=B,s.allSeries=c,s.index=t,s.seriesIndex=r)}}}if(s.series&&(s.mouse&&s.mouse.track&&!e||e)){var z=this.hit.getMouseTrack(),A="",B=s.series,C=s.mouse.position,E=s.mouse.margin,F="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";if(!s.mouse.relative)C.charAt(0)=="n"?A+="top:"+(E+f.top)+"px;bottom:auto;":C.charAt(0)=="s"&&(A+="bottom:"+(E+f.bottom)+"px;top:auto;"),C.charAt(1)=="e"?A+="right:"+(E+f.right)+"px;left:auto;":C.charAt(1)=="w"&&(A+="left:"+(E+f.left)+"px;right:auto;");else if(!B.bars.show&&!B.pie.show)C.charAt(0)=="n"?A+="bottom:"+(E-f.top-s.yaxis.d2p(s.y)+this.canvasHeight)+"px;top:auto;":C.charAt(0)=="s"&&(A+="top:"+(E+f.top+s.yaxis.d2p(s.y))+"px;bottom:auto;"),C.charAt(1)=="e"?A+="left:"+(E+f.left+s.xaxis.d2p(s.x))+"px;right:auto;":C.charAt(1)=="w"&&(A+="right:"+(E-f.left-s.xaxis.d2p(s.x)+this.canvasWidth)+"px;left:auto;");else if(B.bars.show)A+="bottom:"+(E-f.top-s.yaxis.d2p(s.y/2)+this.canvasHeight)+"px;top:auto;",A+="left:"+(E+f.left+s.xaxis.d2p(s.x-d.bars.barWidth/2))+"px;right:auto;";else{var G={x:this.plotWidth/2,y:this.plotHeight/2},H=Math.min(this.canvasWidth,this.canvasHeight)*B.pie.sizeRatio/2,I=s.sAngle<s.eAngle?(s.sAngle+s.eAngle)/2:(s.sAngle+s.eAngle+2*Math.PI)/2;A+="bottom:"+(E-f.top-G.y-Math.sin(I)*H/2+this.canvasHeight)+"px;top:auto;",A+="left:"+(E+f.left+G.x+Math.cos(I)*H/2)+"px;right:auto;"}F+=A,z.style.cssText=F;if(s.x!==null&&s.y!==null){this.hit.clearHit(),this.hit.drawHit(s),a.show(z);var J=s.mouse.trackDecimals;if(J==null||J<0)J=0;z.innerHTML=s.mouse.trackFormatter({x:s.x.toFixed(J),y:s.y.toFixed(J),series:s.series,index:s.index,nearest:s,fraction:s.fraction}),Flotr.EventAdapter.fire(this.el,"flotr:hit",[s,this])}else e&&this.hit.clearHit()}else this.prevHit&&this.hit.clearHit()},getMouseTrack:function(){return this.mouseTrack||(this.mouseTrack=a.node('<div class="flotr-mouse-value"></div>'),a.insert(this.el,this.mouseTrack)),this.mouseTrack}})}(),function(){function a(a,b){return a.which?a.which===1:a.button===0||a.button===1}function b(a,b){return Math.min(Math.max(0,a),b.plotWidth)}function c(a,b){return Math.min(Math.max(0,a),b.plotHeight)}var d=Flotr.DOM,e=Flotr.EventAdapter,f=Flotr._;Flotr.addPlugin("selection",{options:{mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(a){if(!this.options.selection||!this.options.selection.mode)return;this.selection.interval&&clearInterval(this.selection.interval);var b=e.eventPointer(a);this.selection.setSelectionPos(this.selection.selection.second,{pageX:b.x,pageY:b.y}),this.selection.clearSelection(),this.selection.selectionIsSane()&&(this.selection.drawSelection(),this.selection.fireSelectEvent(),this.ignoreClick=!0)},"flotr:mousedown":function(b){if(!this.options.selection||!this.options.selection.mode)return;if(!this.options.selection.mode||!a(b)&&f.isUndefined(b.touches))return;var c=e.eventPointer(b);this.selection.setSelectionPos(this.selection.selection.first,{pageX:c.x,pageY:c.y}),this.selection.interval&&clearInterval(this.selection.interval),this.lastMousePos.pageX=null,this.selection.interval=setInterval(f.bind(this.selection.updateSelection,this),1e3/this.options.selection.fps)}},getArea:function(){var a=this.selection.selection,b=a.first,c=a.second;return{x1:Math.min(b.x,c.x),x2:Math.max(b.x,c.x),y1:Math.min(b.y,c.y),y2:Math.max(b.y,c.y)}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(){var a=this.axes,b=this.selection.selection,c,d,f,g;c=a.x.p2d(b.first.x),d=a.x.p2d(b.second.x),f=a.y.p2d(b.first.y),g=a.y.p2d(b.second.y),e.fire(this.el,"flotr:select",[{x1:Math.min(c,d),y1:Math.min(f,g),x2:Math.max(c,d),y2:Math.max(f,g),xfirst:c,xsecond:d,yfirst:f,ysecond:g},this])},setSelection:function(a,d){var e=this.options,f=this.axes.x,g=this.axes.y,h=g.scale,i=f.scale,j=e.selection.mode.indexOf("x")!=-1,k=e.selection.mode.indexOf("y")!=-1,l=this.selection.selection;this.selection.clearSelection(),l.first.y=c(j&&!k?0:(g.max-a.y1)*h,this),l.second.y=c(j&&!k?this.plotHeight-1:(g.max-a.y2)*h,this),l.first.x=b(k&&!j?0:a.x1,this),l.second.x=b(k&&!j?this.plotWidth:a.x2,this),this.selection.drawSelection(),d||this.selection.fireSelectEvent()},setSelectionPos:function(a,e){var f=this.options,g=d.position(this.overlay),h=this.selection.selection;f.selection.mode.indexOf("x")==-1?a.x=a==h.first?0:this.plotWidth:a.x=b(e.pageX-g.left-this.plotOffset.left,this),f.selection.mode.indexOf("y")==-1?a.y=a==h.first?0:this.plotHeight-1:a.y=c(e.pageY-g.top-this.plotOffset.top,this)},drawSelection:function(){var a=this.selection.selection,b=this.octx,c=this.options,d=this.plotOffset,e=this.selection.prevSelection;if(e!=null&&a.first.x==e.first.x&&a.first.y==e.first.y&&a.second.x==e.second.x&&a.second.y==e.second.y)return;b.save(),b.strokeStyle=this.processColor(c.selection.color,{opacity:.8}),b.lineWidth=1,b.lineJoin="miter",b.fillStyle=this.processColor(c.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:a.first.x,y:a.first.y},second:{x:a.second.x,y:a.second.y}};var f=Math.min(a.first.x,a.second.x),g=Math.min(a.first.y,a.second.y),h=Math.abs(a.second.x-a.first.x),i=Math.abs(a.second.y-a.first.y);b.fillRect(f+d.left+.5,g+d.top+.5,h,i),b.strokeRect(f+d.left+.5,g+d.top+.5,h,i),b.restore()},updateSelection:function(){if(this.lastMousePos.pageX==null)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos),this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()},clearSelection:function(){if(this.selection.prevSelection==null)return;var a=this.selection.prevSelection,b=this.octx.lineWidth,c=this.plotOffset,d=Math.min(a.first.x,a.second.x),e=Math.min(a.first.y,a.second.y),f=Math.abs(a.second.x-a.first.x),g=Math.abs(a.second.y-a.first.y);this.octx.clearRect(d+c.left-b/2+.5,e+c.top-b/2+.5,f+b,g+b),this.selection.prevSelection=null},selectionIsSane:function(){var a=this.selection.selection;return Math.abs(a.second.x-a.first.x)>=5&&Math.abs(a.second.y-a.first.y)>=5}})}(),function(){var a=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){var b=0,c,d,e,f,g,h,i,j=this.options,k=this.ctx,l=this.axes,m;for(e=0;e<l.x.ticks.length;++e)l.x.ticks[e].label&&++b;d=this.plotWidth/b;if(j.grid.circular){k.save(),k.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);var n=this.plotHeight*j.radar.radiusRatio/2+j.fontSize,o=this.axes.x.ticks.length,p=2*(Math.PI/o),q=-Math.PI/2,r,s;m={size:j.fontSize},c=l.x,m.color=c.options.color||j.grid.color;for(e=0;e<c.ticks.length&&c.options.showLabels;++e){g=c.ticks[e],g.label+="";if(!g.label||g.label.length==0)continue;r=Math.cos(e*p+q)*n,s=Math.sin(e*p+q)*n,m.angle=Flotr.toRad(c.options.labelsAngle),m.textBaseline="middle",m.textAlign=Math.abs(r)<.1?"center":r<0?"right":"left",Flotr.drawText(k,g.label,r,s,m)}for(e=0;e<c.minorTicks.length&&c.options.showMinorLabels;++e){g=c.minorTicks[e],g.label+="";if(!g.label||g.label.length==0)continue;r=Math.cos(e*p+q)*n,s=Math.sin(e*p+q)*n,m.angle=Flotr.toRad(c.options.labelsAngle),m.textBaseline="middle",m.textAlign=Math.abs(r)<.1?"center":r<0?"right":"left",Flotr.drawText(k,g.label,r,s,m)}c=l.y,m.color=c.options.color||j.grid.color;for(e=0;e<c.ticks.length&&c.options.showLabels;++e){g=c.ticks[e],g.label+="";if(!g.label||g.label.length==0)continue;m.angle=Flotr.toRad(c.options.labelsAngle),m.textBaseline="middle",m.textAlign="left",Flotr.drawText(k,g.label,3,-(c.ticks[e].v/c.max)*(n-j.fontSize),m)}for(e=0;e<c.minorTicks.length&&c.options.showMinorLabels;++e){g=c.minorTicks[e],g.label+="";if(!g.label||g.label.length==0)continue;m.angle=Flotr.toRad(c.options.labelsAngle),m.textBaseline="middle",m.textAlign="left",Flotr.drawText(k,g.label,3,-(c.ticks[e].v/c.max)*(n-j.fontSize),m)}k.restore();return}if(!j.HtmlText&&this.textEnabled){m={size:j.fontSize},c=l.x,m.color=c.options.color||j.grid.color;for(e=0;e<c.ticks.length&&c.options.showLabels&&c.used;++e){g=c.ticks[e];if(!g.label||g.label.length==0)continue;h=c.d2p(g.v);if(h<0||h>this.plotWidth)continue;m.angle=Flotr.toRad(c.options.labelsAngle),m.textAlign="center",m.textBaseline="top",m=Flotr.getBestTextAlign(m.angle,m),Flotr.drawText(k,g.label,this.plotOffset.left+h,this.plotOffset.top+this.plotHeight+j.grid.labelMargin,m)}c=l.x2,m.color=c.options.color||j.grid.color;for(e=0;e<c.ticks.length&&c.options.showLabels&&c.used;++e){g=c.ticks[e];if(!g.label||g.label.length==0)continue;h=c.d2p(g.v);if(h<0||h>this.plotWidth)continue;m.angle=Flotr.toRad(c.options.labelsAngle),m.textAlign="center",m.textBaseline="bottom",m=Flotr.getBestTextAlign(m.angle,m),Flotr.drawText(k,g.label,this.plotOffset.left+h,this.plotOffset.top+j.grid.labelMargin,m)}c=l.y,m.color=c.options.color||j.grid.color;for(e=0;e<c.ticks.length&&c.options.showLabels&&c.used;++e){g=c.ticks[e];if(!g.label||g.label.length==0)continue;i=c.d2p(g.v);if(i<0||i>this.plotHeight)continue;m.angle=Flotr.toRad(c.options.labelsAngle),m.textAlign="right",m.textBaseline="middle",m=Flotr.getBestTextAlign(m.angle,m),Flotr.drawText(k,g.label,this.plotOffset.left-j.grid.labelMargin,this.plotOffset.top+i,m)}c=l.y2,m.color=c.options.color||j.grid.color;for(e=0;e<c.ticks.length&&c.options.showLabels&&c.used;++e){g=c.ticks[e];if(!g.label||g.label.length==0)continue;i=c.d2p(g.v);if(i<0||i>this.plotHeight)continue;m.angle=Flotr.toRad(c.options.labelsAngle),m.textAlign="left",m.textBaseline="middle",m=Flotr.getBestTextAlign(m.angle,m),Flotr.drawText(k,g.label,this.plotOffset.left+this.plotWidth+j.grid.labelMargin,this.plotOffset.top+i,m),k.save(),k.strokeStyle=m.color,k.beginPath(),k.moveTo(this.plotOffset.left+this.plotWidth-8,this.plotOffset.top+c.d2p(g.v)),k.lineTo(this.plotOffset.left+this.plotWidth,this.plotOffset.top+c.d2p(g.v)),k.stroke(),k.restore()}}else if(l.x.options.showLabels||l.x2.options.showLabels||l.y.options.showLabels||l.y2.options.showLabels){f=[],c=l.x;if(c.options.showLabels)for(e=0;e<c.ticks.length;++e){g=c.ticks[e];if(!g.label||g.label.length==0||this.plotOffset.left+c.d2p(g.v)<0||this.plotOffset.left+c.d2p(g.v)>this.canvasWidth)continue;f.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+j.grid.labelMargin,"px;left:",this.plotOffset.left+c.d2p(g.v)-d/2,"px;width:",d,"px;text-align:center;",c.options.color?"color:"+c.options.color+";":"",'" class="flotr-grid-label">',g.label,"</div>")}c=l.x2;if(c.options.showLabels&&c.used)for(e=0;e<c.ticks.length;++e){g=c.ticks[e];if(!g.label||g.label.length==0||this.plotOffset.left+c.d2p(g.v)<0||this.plotOffset.left+c.d2p(g.v)>this.canvasWidth)continue;f.push('<div style="position:absolute;top:',this.plotOffset.top-j.grid.labelMargin-c.maxLabel.height,"px;left:",this.plotOffset.left+c.d2p(g.v)-d/2,"px;width:",d,"px;text-align:center;",c.options.color?"color:"+c.options.color+";":"",'" class="flotr-grid-label">',g.label,"</div>")}c=l.y;if(c.options.showLabels)for(e=0;e<c.ticks.length;++e){g=c.ticks[e];if(!g.label||g.label.length==0||this.plotOffset.top+c.d2p(g.v)<0||this.plotOffset.top+c.d2p(g.v)>this.canvasHeight)continue;f.push('<div style="position:absolute;top:',this.plotOffset.top+c.d2p(g.v)-c.maxLabel.height/2,"px;left:0;width:",this.plotOffset.left-j.grid.labelMargin,"px;text-align:right;",c.options.color?"color:"+c.options.color+";":"",'" class="flotr-grid-label flotr-grid-label-y">',g.label,"</div>")}c=l.y2;if(c.options.showLabels&&c.used){k.save(),k.strokeStyle=c.options.color||j.grid.color,k.beginPath();for(e=0;e<c.ticks.length;++e){g=c.ticks[e];if(!g.label||g.label.length==0||this.plotOffset.top+c.d2p(g.v)<0||this.plotOffset.top+c.d2p(g.v)>this.canvasHeight)continue;f.push('<div style="position:absolute;top:',this.plotOffset.top+c.d2p(g.v)-c.maxLabel.height/2,"px;right:0;width:",this.plotOffset.right-j.grid.labelMargin,"px;text-align:left;",c.options.color?"color:"+c.options.color+";":"",'" class="flotr-grid-label flotr-grid-label-y">',g.label,"</div>"),k.moveTo(this.plotOffset.left+this.plotWidth-8,this.plotOffset.top+c.d2p(g.v)),k.lineTo(this.plotOffset.left+this.plotWidth,this.plotOffset.top+c.d2p(g.v))}k.stroke(),k.restore()}f=f.join("");var t=a.create("div");a.setStyles(t,{fontSize:"smaller",color:j.grid.color}),t.className="flotr-labels",a.insert(this.el,t),a.insert(t,f)}}})}(),function(){var a=Flotr.DOM,b=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(a){return a},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,labelBoxOpacity:.4,container:null,position:"nw",margin:5,backgroundColor:null,backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()}},insertLegend:function(){if(!this.options.legend.show)return;var c=this.series,d=this.plotOffset,e=this.options,f=e.legend,g=[],h=!1,i=this.ctx,j=b.filter(c,function(a){return a.label&&!a.hide}).length,k=f.position,l=f.margin,m,n,o;if(j)if(!e.HtmlText&&this.textEnabled&&!f.container){var p={size:e.fontSize*1.1,color:e.grid.color},q=f.labelBoxWidth,r=f.labelBoxHeight,s=f.labelBoxMargin,t=d.left+l,u=d.top+l,v=0;for(m=c.length-1;m>-1;--m){if(!c[m].label||c[m].hide)continue;n=f.labelFormatter(c[m].label),v=Math.max(v,this._text.measureText(n,p).width)}var w=Math.round(q+s*3+v),x=Math.round(j*(s+r)+s);k.charAt(0)=="s"&&(u=d.top+this.plotHeight-(l+x)),k.charAt(1)=="e"&&(t=d.left+this.plotWidth-(l+w)),o=this.processColor(f.backgroundColor||"rgb(240,240,240)",{opacity:f.backgroundOpacity||.1}),i.fillStyle=o,i.fillRect(t,u,w,x),i.strokeStyle=f.labelBoxBorderColor,i.strokeRect(Flotr.toPixel(t),Flotr.toPixel(u),w,x);var y=t+s,z=u+s;for(m=0;m<c.length;m++){if(!c[m].label||c[m].hide)continue;n=f.labelFormatter(c[m].label),i.fillStyle=c[m].color,i.fillRect(y,z,q-1,r-1),i.strokeStyle=f.labelBoxBorderColor,i.lineWidth=1,i.strokeRect(Math.ceil(y)-1.5,Math.ceil(z)-1.5,q+2,r+2),Flotr.drawText(i,n,y+q+s,z+r,p),z+=r+s}}else{for(m=0;m<c.length;++m){if(!c[m].label||c[m].hide)continue;m%f.noColumns===0&&(g.push(h?"</tr><tr>":"<tr>"),h=!0);var A=c[m],B=f.labelBoxWidth,C=f.labelBoxHeight,E=A.bars?A.bars.fillOpacity:f.labelBoxOpacity,F="opacity:"+E+";filter:alpha(opacity="+E*100+");";n=f.labelFormatter(A.label),o="background-color:"+(A.bars&&A.bars.show&&A.bars.fillColor&&A.bars.fill?A.bars.fillColor:A.color)+";",g.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',f.labelBoxBorderColor,';padding:1px">','<div style="width:',B-1,"px;height:",C-1,"px;border:1px solid ",c[m].color,'">','<div style="width:',B,"px;height:",C,"px;","opacity:.4;",o,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',n,"</td>")}h&&g.push("</tr>");if(g.length>0){var G='<table style="font-size:smaller;color:'+e.grid.color+'">'+g.join("")+"</table>";if(f.container)a.insert(f.container,G);else{var H={position:"absolute","z-index":2};k.charAt(0)=="n"?(H.top=l+d.top+"px",H.bottom="auto"):k.charAt(0)=="s"&&(H.bottom=l+d.bottom+"px",H.top="auto"),k.charAt(1)=="e"?(H.right=l+d.right+"px",H.left="auto"):k.charAt(1)=="w"&&(H.left=l+d.left+"px",H.right="auto");var I=a.create("div"),J;I.className="flotr-legend",a.setStyles(I,H),a.insert(I,G),a.insert(this.el,I);if(f.backgroundOpacity==0)return;var K=f.backgroundColor||e.grid.backgroundColor||"#ffffff";b.extend(H,a.size(I),{backgroundColor:K,"z-index":1}),H.width+="px",H.height+="px",I=a.create("div"),I.className="flotr-legend-bg",a.setStyles(I,H),a.opacity(I,f.backgroundOpacity),a.insert(I," "),a.insert(this.el,I)}}}}})}(),function(){var a=Flotr.DOM,b=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null},callbacks:{"flotr:afterconstruct":function(){if(!this.options.spreadsheet.show)return;var b=this.spreadsheet,c=a.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),d=a.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),e=a.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>"),f;b.tabsContainer=c,b.tabs={graph:d,data:e},a.insert(c,d),a.insert(c,e),a.insert(this.el,c),f=a.size(e).height+2,this.plotOffset.bottom+=f,a.setStyles(c,{top:this.canvasHeight-f+"px"}),Flotr.EventAdapter.observe(d,"click",function(){b.showTab("graph")}).observe(e,"click",function(){b.showTab("data")});return}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var a=this.series,c=[];for(i=0;i<a.length;++i)b.each(a[i].data,function(a){var d=a[0],e=a[1],f=b.detect(c,function(a){return a[0]==d});if(f)f[i+1]=e;else{var g=[];g[0]=d,g[i+1]=e,c.push(g)}});return this.seriesData=b.sortBy(c,function(a){return a[0]}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var c,d,e=this.series,f=this.spreadsheet.loadDataGrid(),g=["<colgroup><col />"],h,i,j,k=['<table class="flotr-datagrid"><tr class="first-row">'];k.push("<th>&nbsp;</th>");for(c=0;c<e.length;++c)k.push('<th scope="col">'+(e[c].label||String.fromCharCode(65+c))+"</th>"),g.push("<col />");k.push("</tr>");for(d=0;d<f.length;++d){k.push("<tr>");for(c=0;c<e.length+1;++c){var l="td",m=f[d][c]!=null?Math.round(f[d][c]*1e5)/1e5:"";if(c==0){l="th";var n;if(this.options.xaxis.ticks){var o=this.options.xaxis.ticks.find(function(a){return a[0]==f[d][c]});o&&(n=o[1])}else this.options.spreadsheet.tickFormatter?n=this.options.spreadsheet.tickFormatter(m):n=this.options.xaxis.tickFormatter(m);n&&(m=n)}k.push("<"+l+(l=="th"?' scope="row"':"")+">"+m+"</"+l+">")}k.push("</tr>")}g.push("</colgroup>"),j=a.node(k.join("")),h=a.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),i=a.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),Flotr.EventAdapter.observe(h,"click",b.bind(this.spreadsheet.downloadCSV,this)).observe(i,"click",b.bind(this.spreadsheet.selectAllData,this));var p=a.node('<div class="flotr-datagrid-toolbar"></div>');a.insert(p,h),a.insert(p,i);var q=this.canvasHeight-a.size(this.spreadsheet.tabsContainer).height-2,r=a.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+q+'px;overflow:auto;z-index:10"></div>');return a.insert(r,p),a.insert(r,j),a.insert(this.el,r),this.spreadsheet.datagrid=j,this.spreadsheet.container=r,j},showTab:function(b){var c="canvas, .flotr-labels, .flotr-legend, .flotr-legend-bg, .flotr-title, .flotr-subtitle";switch(b){case"graph":a.hide(this.spreadsheet.container),a.removeClass(this.spreadsheet.tabs.data,"selected"),a.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),a.show(this.spreadsheet.container),a.addClass(this.spreadsheet.tabs.data,"selected"),a.removeClass(this.spreadsheet.tabs.graph,"selected")}},selectAllData:function(){console.log("selectAllData");if(this.spreadsheet.tabs){var a,b,c,d,e=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(c=e.ownerDocument)&&(d=c.defaultView)&&d.getSelection&&c.createRange&&(a=window.getSelection())&&a.removeAllRanges?(b=c.createRange(),b.selectNode(e),a.removeAllRanges(),a.addRange(b)):document.body&&document.body.createTextRange&&(b=document.body.createTextRange())&&(b.moveToElementText(e),b.select())},0),!0}return!1},downloadCSV:function(){console.log("downloadCSV");var a,b="",c=this.series,d=this.options,e=this.spreadsheet.loadDataGrid(),f=encodeURIComponent(d.spreadsheet.csvFileSeparator);if(d.spreadsheet.decimalSeparator===d.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+d.spreadsheet.decimalSeparator+")";for(a=0;a<c.length;++a)b+=f+'"'+(c[a].label||String.fromCharCode(65+a)).replace(/\"/g,'\\"')+'"';b+="%0D%0A";for(a=0;a<e.length;++a){var g="";if(d.xaxis.ticks){var h=d.xaxis.ticks.find(function(b){return b[0]==e[a][0]});h&&(g=h[1])}else d.spreadsheet.tickFormatter?g=d.spreadsheet.tickFormatter(e[a][0]):g=d.xaxis.tickFormatter(e[a][0]);g='"'+(g+"").replace(/\"/g,'\\"')+'"';var i=e[a].slice(1).join(f);d.spreadsheet.decimalSeparator!=="."&&(i=i.replace(/\./g,d.spreadsheet.decimalSeparator)),b+=g+f+i+"%0D%0A"}Flotr.isIE&&Flotr.isIE<9?(b=b.replace(new RegExp(f,"g"),decodeURIComponent(f)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(b)):window.open("data:text/csv,"+b)}})}(),function(){var a=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var b,c=this.options,d=c.grid.labelMargin,e=this.ctx,f=this.axes;if(!c.HtmlText&&this.textEnabled){var g={size:c.fontSize,color:c.grid.color,textAlign:"center"};c.subtitle&&Flotr.drawText(e,c.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,g),g.weight=1.5,g.size*=1.5,c.title&&Flotr.drawText(e,c.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,g),g.weight=1.8,g.size*=.8,f.x.options.title&&f.x.used&&(g.textAlign=f.x.options.titleAlign||"center",g.textBaseline="top",g.angle=Flotr.toRad(f.x.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+f.x.maxLabel.height+this.plotHeight+2*d,g)),f.x2.options.title&&f.x2.used&&(g.textAlign=f.x2.options.titleAlign||"center",g.textBaseline="bottom",g.angle=Flotr.toRad(f.x2.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-f.x2.maxLabel.height-2*d,g)),f.y.options.title&&f.y.used&&(g.textAlign=f.y.options.titleAlign||"right",g.textBaseline="middle",g.angle=Flotr.toRad(f.y.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.y.options.title,this.plotOffset.left-f.y.maxLabel.width-2*d,this.plotOffset.top+this.plotHeight/2,g)),f.y2.options.title&&f.y2.used&&(g.textAlign=f.y2.options.titleAlign||"left",g.textBaseline="middle",g.angle=Flotr.toRad(f.y2.options.titleAngle),g=Flotr.getBestTextAlign(g.angle,g),Flotr.drawText(e,f.y2.options.title,this.plotOffset.left+this.plotWidth+f.y2.maxLabel.width+2*d,this.plotOffset.top+this.plotHeight/2,g))}else{b=[],c.title&&b.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',c.title,"</div>"),c.subtitle&&b.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',c.subtitle,"</div>"),b.push("</div>"),b.push('<div class="flotr-axis-title" style="font-weight:bold;">'),f.x.options.title&&f.x.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+c.grid.labelMargin+f.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,'px;text-align:center;" class="flotr-axis-title">',f.x.options.title,"</div>"),f.x2.options.title&&f.x2.used&&b.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,'px;text-align:center;" class="flotr-axis-title">',f.x2.options.title,"</div>"),f.y.options.title&&f.y.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-f.y.titleSize.height/2,'px;left:0;text-align:right;" class="flotr-axis-title">',f.y.options.title,"</div>"),f.y2.options.title&&f.y2.used&&b.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-f.y.titleSize.height/2,'px;right:0;text-align:right;" class="flotr-axis-title">',f.y2.options.title,"</div>"),b=b.join("");var h=a.create("div");a.setStyles({color:c.grid.color}),h.className="flotr-titles",a.insert(this.el,h),a.insert(h,b)}}})}()